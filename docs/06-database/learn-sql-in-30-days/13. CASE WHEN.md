---
title: 13. CASE WHEN
slug: 13-case-when
description: Giá»›i thiá»‡u vá» Ä‘iá»u kiá»‡n trong SQL, cÃ¡ch sá»­ dá»¥ng CASE WHEN Ä‘á»ƒ xá»­ lÃ½ Ä‘iá»u kiá»‡n trong truy váº¥n SQL, cÃ¡ch sá»­ dá»¥ng vÃ  vÃ­ dá»¥ minh há»a.
image: https://tiennhm.github.io/img/docs/database.jpg
sidebar_position: 13
# sidebar_class_name: hidden
tags:
    - database
    - sql
    - learn-sql
    - roadmap
    - dbms
keywords: [database, sql, learn-sql, roadmap, dbms]
enableComments: true # for Gisqus comments, set to true
draft: false # set to true to hide this post from the site
---

> Má»¥c tiÃªu bÃ i há»c: Giá»›i thiá»‡u vá» Ä‘iá»u kiá»‡n trong SQL, cÃ¡ch sá»­ dá»¥ng `CASE WHEN` Ä‘á»ƒ xá»­ lÃ½ Ä‘iá»u kiá»‡n trong truy váº¥n SQL.

HÃ´m nay, báº¡n sáº½ há»c cÃ¡ch **xá»­ lÃ½ Ä‘iá»u kiá»‡n trong SQL** báº±ng cÃ¡ch sá»­ dá»¥ng **`CASE WHEN`**, giÃºp báº¡n thá»±c hiá»‡n cÃ¡c phÃ©p so sÃ¡nh vÃ  táº¡o ra dá»¯ liá»‡u cÃ³ Ä‘iá»u kiá»‡n ngay trong truy váº¥n SQL.

---

## **1ï¸âƒ£ CASE WHEN lÃ  gÃ¬?**  
`CASE WHEN` trong SQL hoáº¡t Ä‘á»™ng giá»‘ng nhÆ° **cÃ¢u lá»‡nh if-else** trong láº­p trÃ¬nh, cho phÃ©p báº¡n **gÃ¡n giÃ¡ trá»‹ dá»±a trÃªn Ä‘iá»u kiá»‡n cá»¥ thá»ƒ**.  

**ðŸ“Œ Cáº¥u trÃºc:**  
```sql
SELECT column1,
       CASE 
           WHEN condition1 THEN result1
           WHEN condition2 THEN result2
           ELSE result_default
       END AS new_column
FROM table_name;
```
âœ”ï¸ Äiá»u kiá»‡n trong `CASE WHEN` cÃ³ thá»ƒ sá»­ dá»¥ng cÃ¡c toÃ¡n tá»­ nhÆ° `=, >, <, >=, <=, !=`.  
âœ”ï¸ Náº¿u Ä‘iá»u kiá»‡n Ä‘áº§u tiÃªn Ä‘Ãºng, SQL sáº½ **khÃ´ng kiá»ƒm tra tiáº¿p Ä‘iá»u kiá»‡n sau**.  
âœ”ï¸ `ELSE` lÃ  tÃ¹y chá»n â€“ náº¿u khÃ´ng cÃ³, SQL sáº½ tráº£ vá» `NULL` khi khÃ´ng cÃ³ Ä‘iá»u kiá»‡n nÃ o Ä‘Ãºng.  

---

## **2ï¸âƒ£ VÃ­ dá»¥ cÆ¡ báº£n vá» CASE WHEN**  

### **ðŸ“Œ VÃ­ dá»¥ 1: PhÃ¢n loáº¡i sáº£n pháº©m theo giÃ¡**  
```sql
SELECT ProductName, Price,
       CASE 
           WHEN Price < 100 THEN 'Ráº»'
           WHEN Price BETWEEN 100 AND 500 THEN 'Trung bÃ¬nh'
           ELSE 'Äáº¯t'
       END AS PriceCategory
FROM Products;
```

âœ… **Káº¿t quáº£:**  
| ProductName | Price | PriceCategory |
|-------------|-------|--------------|
| Ão thun    | 50    | Ráº»          |
| GiÃ y Nike  | 300   | Trung bÃ¬nh  |
| Laptop Dell | 1500  | Äáº¯t         |

---

## **3ï¸âƒ£ CASE WHEN vá»›i nhiá»u Ä‘iá»u kiá»‡n**  

### **ðŸ“Œ VÃ­ dá»¥ 2: PhÃ¢n loáº¡i khÃ¡ch hÃ ng theo sá»‘ lÆ°á»£ng Ä‘Æ¡n hÃ ng**  
```sql
SELECT CustomerName, OrderCount,
       CASE 
           WHEN OrderCount = 0 THEN 'ChÆ°a mua hÃ ng'
           WHEN OrderCount BETWEEN 1 AND 5 THEN 'KhÃ¡ch hÃ ng má»›i'
           WHEN OrderCount BETWEEN 6 AND 20 THEN 'KhÃ¡ch hÃ ng thÃ¢n thiáº¿t'
           ELSE 'VIP'
       END AS CustomerCategory
FROM Customers;
```

âœ… **Giáº£i thÃ­ch:**  
- Náº¿u khÃ¡ch hÃ ng chÆ°a cÃ³ Ä‘Æ¡n hÃ ng (`OrderCount = 0`), há» sáº½ thuá»™c nhÃ³m **"ChÆ°a mua hÃ ng"**.  
- Náº¿u cÃ³ tá»« **1 Ä‘áº¿n 5 Ä‘Æ¡n**, há» lÃ  **"KhÃ¡ch hÃ ng má»›i"**.  
- Náº¿u cÃ³ **6 - 20 Ä‘Æ¡n**, há» lÃ  **"KhÃ¡ch hÃ ng thÃ¢n thiáº¿t"**.  
- Náº¿u nhiá»u hÆ¡n 20 Ä‘Æ¡n, há» lÃ  **"VIP"**.  

---

## **4ï¸âƒ£ CASE WHEN káº¿t há»£p vá»›i toÃ¡n tá»­ logic (AND, OR, LIKE)**  

### **ðŸ“Œ VÃ­ dá»¥ 3: XÃ¡c Ä‘á»‹nh tráº¡ng thÃ¡i Ä‘Æ¡n hÃ ng**  
```sql
SELECT OrderID, Status,
       CASE 
           WHEN Status = 'Pending' THEN 'Chá» xá»­ lÃ½'
           WHEN Status = 'Shipped' THEN 'ÄÃ£ giao hÃ ng'
           WHEN Status = 'Cancelled' THEN 'ÄÃ£ há»§y'
           ELSE 'KhÃ´ng xÃ¡c Ä‘á»‹nh'
       END AS Status_VN
FROM Orders;
```

âœ… **Káº¿t quáº£:**  
| OrderID | Status    | Status_VN        |
|---------|-----------|------------------|
| 101     | Pending   | Chá» xá»­ lÃ½        |
| 102     | Shipped   | ÄÃ£ giao hÃ ng     |
| 103     | Cancelled | ÄÃ£ há»§y           |

---

## **5ï¸âƒ£ CASE WHEN trong ORDER BY**  

Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng `CASE WHEN` Ä‘á»ƒ **sáº¯p xáº¿p dá»¯ liá»‡u theo Ä‘iá»u kiá»‡n**.

### **ðŸ“Œ VÃ­ dá»¥ 4: Sáº¯p xáº¿p sáº£n pháº©m theo má»©c Ä‘á»™ Æ°u tiÃªn**  
```sql
SELECT ProductName, Stock,
       CASE 
           WHEN Stock = 0 THEN 'Háº¿t hÃ ng'
           WHEN Stock < 10 THEN 'Sáº¯p háº¿t'
           ELSE 'CÃ²n hÃ ng'
       END AS StockStatus
FROM Products
ORDER BY 
       CASE 
           WHEN Stock = 0 THEN 1
           WHEN Stock < 10 THEN 2
           ELSE 3
       END;
```

âœ… **Giáº£i thÃ­ch:**  
- `Háº¿t hÃ ng` sáº½ xáº¿p lÃªn Ä‘áº§u.  
- `Sáº¯p háº¿t` (cÃ²n dÆ°á»›i 10 sáº£n pháº©m) sáº½ xáº¿p sau.  
- `CÃ²n hÃ ng` sáº½ xáº¿p cuá»‘i.  

---

## **6ï¸âƒ£ BÃ i táº­p thá»±c hÃ nh ðŸš€**  
ðŸ‘‰ **BÃ i 1:** Viáº¿t truy váº¥n phÃ¢n loáº¡i nhÃ¢n viÃªn theo sá»‘ nÄƒm lÃ m viá»‡c (`YearsWorked`).  
ðŸ‘‰ **BÃ i 2:** Táº¡o cá»™t `SalaryLevel` Ä‘á»ƒ phÃ¢n loáº¡i lÆ°Æ¡ng theo cÃ¡c má»©c: `Tháº¥p`, `Trung bÃ¬nh`, `Cao`.  
ðŸ‘‰ **BÃ i 3:** XÃ¡c Ä‘á»‹nh tráº¡ng thÃ¡i khÃ¡ch hÃ ng dá»±a trÃªn sá»‘ tiá»n Ä‘Ã£ chi tiÃªu (`TotalSpent`).  
ðŸ‘‰ **BÃ i 4:** Sáº¯p xáº¿p Ä‘Æ¡n hÃ ng theo má»©c Ä‘á»™ Æ°u tiÃªn (`High, Medium, Low`).  

---

âœ… **TÃ³m táº¯t NgÃ y 13:**  
âœ”ï¸ **CASE WHEN** giÃºp xá»­ lÃ½ Ä‘iá»u kiá»‡n trong SQL giá»‘ng nhÆ° `if-else`.  
âœ”ï¸ CÃ³ thá»ƒ dÃ¹ng `CASE WHEN` Ä‘á»ƒ phÃ¢n loáº¡i dá»¯ liá»‡u, táº¡o cá»™t má»›i, thay Ä‘á»•i giÃ¡ trá»‹ hiá»ƒn thá»‹.  
âœ”ï¸ CÃ³ thá»ƒ káº¿t há»£p vá»›i `ORDER BY` Ä‘á»ƒ sáº¯p xáº¿p theo Ä‘iá»u kiá»‡n.  

ðŸš€ **Tiáº¿p theo:** [Ã”n táº­p vÃ  bÃ i táº­p tá»•ng há»£p tuáº§n 2!](14.%20Review%202.md)

ðŸ“Œ **Lá»™ trÃ¬nh:** [Há»c SQL trong 30 ngÃ y](00.%2030-Day%20SQL%20Learning%20Roadmap.md)