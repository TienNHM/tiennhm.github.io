---
title: 27. Database design best practices
slug: 27-database-design-best-practices
description: Thi·∫øt k·∫ø c∆° s·ªü d·ªØ li·ªáu (Database Design) - Nguy√™n t·∫Øc chu·∫©n h√≥a CSDL, khi n√†o n√™n phi chu·∫©n h√≥a, best practices thi·∫øt k·∫ø CSDL hi·ªáu qu·∫£.
image: https://tiennhm.github.io/img/docs/database.jpg
sidebar_position: 27
# sidebar_class_name: hidden
tags:
    - database
    - sql
    - learn-sql
    - roadmap
    - dbms
keywords: [database, sql, learn-sql, roadmap, dbms]
enableComments: true # for Gisqus comments, set to true
draft: false # set to true to hide this post from the site
---

# üìå **Ng√†y 27: Thi·∫øt K·∫ø CSDL & Best Practices**  

## **1Ô∏è‚É£ Gi·ªõi thi·ªáu v·ªÅ Thi·∫øt K·∫ø CSDL**  
Thi·∫øt k·∫ø c∆° s·ªü d·ªØ li·ªáu (Database Design) l√† m·ªôt b∆∞·ªõc quan tr·ªçng ƒë·ªÉ ƒë·∫£m b·∫£o h·ªá th·ªëng **ho·∫°t ƒë·ªông hi·ªáu qu·∫£, d·ªÖ b·∫£o tr√¨, v√† c√≥ th·ªÉ m·ªü r·ªông**. N·∫øu thi·∫øt k·∫ø kh√¥ng t·ªët, c√≥ th·ªÉ d·∫´n ƒë·∫øn:  
- **D·ªØ li·ªáu d∆∞ th·ª´a (Redundancy)** ‚Üí L√£ng ph√≠ b·ªô nh·ªõ.  
- **T√≠nh to√†n v·∫πn k√©m (Data Integrity Issues)** ‚Üí D·ªØ li·ªáu kh√¥ng nh·∫•t qu√°n.  
- **Hi·ªáu su·∫•t truy v·∫•n ch·∫≠m** ‚Üí G√¢y ·∫£nh h∆∞·ªüng ƒë·∫øn tr·∫£i nghi·ªám ng∆∞·ªùi d√πng.  

---

## **2Ô∏è‚É£ Nguy√™n T·∫Øc Chu·∫©n H√≥a CSDL (Normalization)**  
### ‚úÖ **2.1. C√°c m·ª©c chu·∫©n h√≥a (NF - Normal Form)**  
**Chu·∫©n h√≥a d·ªØ li·ªáu (Normalization)** gi√∫p gi·∫£m thi·ªÉu d∆∞ th·ª´a v√† c·∫£i thi·ªán t√≠nh to√†n v·∫πn d·ªØ li·ªáu.  

| C·∫•p ƒë·ªô | √ù nghƒ©a | V√≠ d·ª• |
|--------|--------|-------|
| **1NF (First Normal Form)** | M·ªói c·ªôt ch·ªâ ch·ª©a m·ªôt gi√° tr·ªã ƒë∆°n l·∫ª, kh√¥ng c√≥ b·∫£ng l·ªìng nhau. | Kh√¥ng c√≥ danh s√°ch ID s·∫£n ph·∫©m trong m·ªôt √¥. |
| **2NF (Second Normal Form)** | Th·ªèa 1NF + M·ªói b·∫£ng c√≥ kh√≥a ch√≠nh duy nh·∫•t. | T√°ch b·∫£ng `Orders` v√† `OrderDetails`. |
| **3NF (Third Normal Form)** | Th·ªèa 2NF + Kh√¥ng c√≥ ph·ª• thu·ªôc b·∫Øc c·∫ßu. | T√°ch b·∫£ng `Customers` v√† `Cities`. |
| **BCNF (Boyce-Codd Normal Form)** | Phi√™n b·∫£n m·∫°nh h∆°n c·ªßa 3NF. | √Åp d·ª•ng trong c√°c h·ªá th·ªëng l·ªõn. |

üí° **V√≠ d·ª• v·ªÅ d·ªØ li·ªáu ch∆∞a chu·∫©n h√≥a:**  
```sql
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerName VARCHAR(100), 
    ProductList TEXT,   -- ‚ùå Ch·ª©a nhi·ªÅu gi√° tr·ªã trong 1 c·ªôt
    TotalAmount DECIMAL(10,2)
);
```
üí° **D·ªØ li·ªáu sau khi chu·∫©n h√≥a (1NF, 2NF, 3NF):**  
```sql
CREATE TABLE Customers (
    CustomerID INT PRIMARY KEY,
    CustomerName VARCHAR(100)
);

CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerID INT,
    TotalAmount DECIMAL(10,2),
    FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
);

CREATE TABLE OrderDetails (
    OrderDetailID INT PRIMARY KEY,
    OrderID INT,
    ProductID INT,
    Quantity INT,
    FOREIGN KEY (OrderID) REFERENCES Orders(OrderID)
);
```
üöÄ **L·ª£i √≠ch:** D·ªØ li·ªáu c√≥ **t√≠nh to√†n v·∫πn cao h∆°n**, d·ªÖ m·ªü r·ªông v√† qu·∫£n l√Ω h∆°n.

---

## **3Ô∏è‚É£ Khi N√†o N√™n Phi Chu·∫©n H√≥a? (Denormalization)**
Chu·∫©n h√≥a gi√∫p gi·∫£m d∆∞ th·ª´a d·ªØ li·ªáu nh∆∞ng c√≥ th·ªÉ l√†m ch·∫≠m truy v·∫•n v√¨ c·∫ßn **JOIN nhi·ªÅu b·∫£ng**.  
üîπ **Denormalization** (phi chu·∫©n h√≥a) gi√∫p **tƒÉng t·ªëc truy v·∫•n nh∆∞ng t·ªën b·ªô nh·ªõ h∆°n**.  

üí° **V√≠ d·ª•:**  
- Trong h·ªá th·ªëng b√°o c√°o, thay v√¨ **JOIN nhi·ªÅu b·∫£ng**, ta c√≥ th·ªÉ t·∫°o m·ªôt b·∫£ng ch·ª©a s·∫µn d·ªØ li·ªáu t·ªïng h·ª£p.  
- Khi c·∫ßn truy v·∫•n nhanh danh s√°ch kh√°ch h√†ng v√† t·ªïng s·ªë ƒë∆°n h√†ng c·ªßa h·ªç, ta c√≥ th·ªÉ l∆∞u s·∫µn s·ªë ƒë∆°n h√†ng trong b·∫£ng `Customers`.  

```sql
ALTER TABLE Customers ADD TotalOrders INT DEFAULT 0;
```
üéØ **Gi·∫£i ph√°p:**  
- **OLTP (Online Transaction Processing)** ‚Üí D√πng chu·∫©n h√≥a.  
- **OLAP (Online Analytical Processing)** ‚Üí C√≥ th·ªÉ phi chu·∫©n h√≥a ƒë·ªÉ tƒÉng hi·ªáu su·∫•t.

---

## **4Ô∏è‚É£ Thi·∫øt K·∫ø CSDL Hi·ªáu Qu·∫£ & Best Practices**  
### ‚úÖ **4.1. Ch·ªçn Ki·ªÉu D·ªØ Li·ªáu T·ªëi ∆Øu**  
- **S·ª≠ d·ª•ng ki·ªÉu d·ªØ li·ªáu nh·ªè nh·∫•t c√≥ th·ªÉ** (tr√°nh d√πng `TEXT` n·∫øu `VARCHAR(255)` ƒë·ªß).  
- **Kh√¥ng l∆∞u tr·ªØ d·ªØ li·ªáu d∆∞ th·ª´a** (tr√°nh l∆∞u `Age`, ch·ªâ l∆∞u `BirthDate` r·ªìi t√≠nh to√°n).  

üí° **V√≠ d·ª• sai** (L∆∞u tr·ªØ `Age`, g√¢y l·ªói khi d·ªØ li·ªáu c≈© ƒëi):  
```sql
CREATE TABLE Users (
    UserID INT PRIMARY KEY,
    Name VARCHAR(100),
    Age INT   -- ‚ùå Sai, n√™n l∆∞u BirthDate
);
```
üí° **C√°ch ƒë√∫ng**:  
```sql
CREATE TABLE Users (
    UserID INT PRIMARY KEY,
    Name VARCHAR(100),
    BirthDate DATE   -- ‚úÖ ƒê√∫ng, c√≥ th·ªÉ t√≠nh Age khi c·∫ßn
);
```

### ‚úÖ **4.2. S·ª≠ D·ª•ng Index H·ª£p L√Ω**  
- **INDEX** gi√∫p tƒÉng t·ªëc truy v·∫•n nh∆∞ng t·ªën b·ªô nh·ªõ.  
- Ch·ªâ n√™n index nh·ªØng c·ªôt th∆∞·ªùng xuy√™n l·ªçc (`WHERE`), `JOIN`, ho·∫∑c `ORDER BY`.  
- Kh√¥ng n√™n index c·ªôt c√≥ d·ªØ li·ªáu thay ƒë·ªïi li√™n t·ª•c (`UPDATE` th∆∞·ªùng xuy√™n).  

üí° **V√≠ d·ª•:**
```sql
CREATE INDEX idx_orders_customerid ON Orders(CustomerID);
```

### ‚úÖ **4.3. T·∫°o Kho√° Ch√≠nh & Kho√° Ngo·∫°i H·ª£p L√Ω**  
- Lu√¥n c√≥ **Primary Key (PK)** tr√™n m·ªói b·∫£ng.  
- D√πng **Foreign Key (FK)** ƒë·ªÉ duy tr√¨ quan h·ªá gi·ªØa c√°c b·∫£ng.  

üí° **V√≠ d·ª•:**  
```sql
ALTER TABLE Orders ADD CONSTRAINT fk_orders_customers FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID);
```

### ‚úÖ **4.4. Tr√°nh L·∫°m D·ª•ng NULL**  
- **NULL l√†m ch·∫≠m truy v·∫•n** v√¨ c·∫ßn ki·ªÉm tra gi√° tr·ªã kh√¥ng x√°c ƒë·ªãnh.  
- N·∫øu c√≥ th·ªÉ, n√™n ƒë·∫∑t **DEFAULT VALUE** thay v√¨ NULL.  

üí° **V√≠ d·ª•:**  
```sql
ALTER TABLE Users MODIFY COLUMN Status VARCHAR(20) NOT NULL DEFAULT 'Active';
```

### ‚úÖ **4.5. Chia Nh·ªè D·ªØ Li·ªáu L·ªõn (Partitioning & Sharding)**  
- **Partitioning:** Chia b·∫£ng l·ªõn th√†nh nhi·ªÅu ph·∫ßn nh·ªè theo **ng√†y, th√°ng, nƒÉm**.  
- **Sharding:** Chia d·ªØ li·ªáu theo **user ID**, **khu v·ª±c ƒë·ªãa l√Ω**, v.v.  

üí° **V√≠ d·ª• Partitioning theo nƒÉm:**  
```sql
CREATE TABLE Orders_2023 PARTITION OF Orders FOR VALUES IN (2023);
CREATE TABLE Orders_2024 PARTITION OF Orders FOR VALUES IN (2024);
```

---

## **5Ô∏è‚É£ B√†i T·∫≠p Th·ª±c H√†nh & G·ª£i √ù ƒê√°p √Ån**
### üîπ **B√†i 1: X√°c ƒë·ªãnh l·ªói thi·∫øt k·∫ø**  
Cho b·∫£ng sau, h√£y x√°c ƒë·ªãnh l·ªói v√† ƒë·ªÅ xu·∫•t c√°ch c·∫£i thi·ªán.  
```sql
CREATE TABLE Employees (
    ID INT PRIMARY KEY,
    Name VARCHAR(255),
    Department VARCHAR(255),
    ManagerName VARCHAR(255)
);
```
üìù **G·ª£i √Ω ƒë√°p √°n:**  
- `Department` n√™n t·∫°o b·∫£ng ri√™ng (`Departments`).  
- `ManagerName` n√™n thay b·∫±ng `ManagerID` ƒë·ªÉ tr√°nh l·ªói tr√πng l·∫∑p.  

üí° **Thi·∫øt k·∫ø ƒë√∫ng:**  
```sql
CREATE TABLE Departments (
    DepartmentID INT PRIMARY KEY,
    DepartmentName VARCHAR(255)
);

CREATE TABLE Employees (
    ID INT PRIMARY KEY,
    Name VARCHAR(255),
    DepartmentID INT,
    ManagerID INT,
    FOREIGN KEY (DepartmentID) REFERENCES Departments(DepartmentID),
    FOREIGN KEY (ManagerID) REFERENCES Employees(ID)
);
```

### üîπ **B√†i 2: Chu·∫©n h√≥a b·∫£ng sau v·ªÅ 3NF**  
```sql
CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerName VARCHAR(255),
    CustomerPhone VARCHAR(20),
    ProductName VARCHAR(255),
    ProductPrice DECIMAL(10,2),
    Quantity INT
);
```
üìù **G·ª£i √Ω ƒë√°p √°n:**  
- T√°ch **Customers** (`CustomerID, Name, Phone`).  
- T√°ch **Products** (`ProductID, Name, Price`).  
- T·∫°o b·∫£ng **OrderDetails** (`OrderID, ProductID, Quantity`).  

---

#### üìå **T√≥m t·∫Øt b√†i h·ªçc**  
‚úÖ **Chu·∫©n h√≥a gi√∫p ƒë·∫£m b·∫£o t√≠nh to√†n v·∫πn d·ªØ li·ªáu** nh∆∞ng c√≥ th·ªÉ l√†m ch·∫≠m truy v·∫•n.  
‚úÖ **Phi chu·∫©n h√≥a gi√∫p tƒÉng t·ªëc nh∆∞ng t·ªën b·ªô nh·ªõ h∆°n.**  
‚úÖ **Index, Partitioning, Sharding gi√∫p t·ªëi ∆∞u CSDL l·ªõn.**  
‚úÖ **Thi·∫øt k·∫ø t·ªët gi√∫p h·ªá th·ªëng d·ªÖ m·ªü r·ªông & b·∫£o tr√¨ h∆°n.**  

---

üöÄ **Ti·∫øp theo:** [T·ªëi ∆∞u h√≥a truy v·∫•n & Debug SQL n√¢ng cao](28.%20SQL%20query%20optimization.md).

üìå **L·ªô tr√¨nh:** [H·ªçc SQL trong 30 ng√†y](00.%2030-Day%20SQL%20Learning%20Roadmap.md).