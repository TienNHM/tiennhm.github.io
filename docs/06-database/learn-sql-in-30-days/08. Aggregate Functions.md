---
title: 08. Aggregate Functions
slug: 08-aggregate-functions
description: Giá»›i thiá»‡u vá» cÃ¡c hÃ m tá»•ng há»£p trong SQL. Há»c cÃ¡ch sá»­ dá»¥ng cÃ¡c hÃ m tá»•ng há»£p Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c phÃ©p tÃ­nh trÃªn dá»¯ liá»‡u trong cÆ¡ sá»Ÿ dá»¯ liá»‡u.
image: https://tiennhm.github.io/img/docs/database.jpg
sidebar_position: 8
# sidebar_class_name: hidden
tags:
    - database
    - sql
    - learn-sql
    - roadmap
    - dbms
keywords: [database, sql, learn-sql, roadmap, dbms]
enableComments: true # for Gisqus comments, set to true
draft: false # set to true to hide this post from the site
---

# ğŸ”¥ **8: Aggregate Functions (HÃ m Tá»•ng Há»£p)**

> ğŸ“Œ **Má»¥c tiÃªu bÃ i há»c:**  Há»c cÃ¡ch sá»­ dá»¥ng **cÃ¡c hÃ m tá»•ng há»£p (Aggregate Functions)** trong SQL Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c phÃ©p tÃ­nh trÃªn dá»¯ liá»‡u, giÃºp tÃ³m táº¯t vÃ  phÃ¢n tÃ­ch thÃ´ng tin tá»« báº£ng.

---

## **1ï¸âƒ£ Äá»‹nh nghÄ©a Aggregate Functions**  

**HÃ m tá»•ng há»£p (Aggregate Functions)** trong SQL lÃ  cÃ¡c hÃ m thá»±c hiá»‡n **tÃ­nh toÃ¡n trÃªn nhiá»u dÃ²ng dá»¯ liá»‡u vÃ  tráº£ vá» má»™t giÃ¡ trá»‹ duy nháº¥t**.  

ğŸ’¡ **á»¨ng dá»¥ng:**  
- TÃ³m táº¯t dá»¯ liá»‡u (tÃ­nh tá»•ng, Ä‘áº¿m sá»‘ lÆ°á»£ng, tÃ¬m giÃ¡ trá»‹ lá»›n nháº¥t/nhá» nháº¥t, v.v.).  
- Há»— trá»£ phÃ¢n tÃ­ch dá»¯ liá»‡u trong bÃ¡o cÃ¡o, thá»‘ng kÃª.  
- Káº¿t há»£p vá»›i `GROUP BY` Ä‘á»ƒ nhÃ³m dá»¯ liá»‡u theo tiÃªu chÃ­ cá»¥ thá»ƒ.  

---

## **2ï¸âƒ£ CÃ¡c hÃ m tá»•ng há»£p phá»• biáº¿n**  

| ğŸ› ï¸ **HÃ m**    | ğŸ” **Chá»©c nÄƒng**                           |
|---------------|------------------------------------|
| `COUNT(*)`    | Äáº¿m sá»‘ lÆ°á»£ng dÃ²ng trong báº£ng       |
| `SUM(column)` | TÃ­nh tá»•ng giÃ¡ trá»‹ trong má»™t cá»™t sá»‘ |
| `AVG(column)` | TÃ­nh trung bÃ¬nh cá»§a má»™t cá»™t sá»‘     |
| `MIN(column)` | TÃ¬m giÃ¡ trá»‹ nhá» nháº¥t trong cá»™t     |
| `MAX(column)` | TÃ¬m giÃ¡ trá»‹ lá»›n nháº¥t trong cá»™t     |

---

## **3ï¸âƒ£ Chuáº©n bá»‹ dá»¯ liá»‡u**  

ğŸ“Œ **Táº¡o database vÃ  báº£ng `Orders` Ä‘á»ƒ thá»±c hÃ nh**  

```sql
CREATE DATABASE ShopDB;
USE ShopDB;

CREATE TABLE Orders (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    CustomerID INT NOT NULL,
    TotalAmount FLOAT NOT NULL,
    OrderDate DATE NOT NULL
);

INSERT INTO Orders (CustomerID, TotalAmount, OrderDate) VALUES
(1, 1500, '2024-02-20'),
(2, 1200, '2024-02-21'),
(3, 500, '2024-02-22'),
(1, 800, '2024-02-22'),
(2, 2000, '2024-02-23'),
(3, 700, '2024-02-23');
```
âœ… **Sau khi cháº¡y lá»‡nh trÃªn**, báº¡n sáº½ cÃ³ báº£ng `Orders` chá»©a dá»¯ liá»‡u máº«u Ä‘á»ƒ thá»±c hÃ nh.

---

## **4ï¸âƒ£ `COUNT()` â€“ Äáº¿m sá»‘ dÃ²ng**  

HÃ m `COUNT()` giÃºp **Ä‘áº¿m sá»‘ lÆ°á»£ng báº£n ghi** trong báº£ng.  

ğŸ“Œ **Äáº¿m sá»‘ Ä‘Æ¡n hÃ ng trong báº£ng `Orders`**  
```sql
SELECT COUNT(*) AS TotalOrders FROM Orders;
```
ğŸ”¹ **Káº¿t quáº£:** `6` (CÃ³ 6 Ä‘Æ¡n hÃ ng trong há»‡ thá»‘ng).  

ğŸ“Œ **Äáº¿m sá»‘ Ä‘Æ¡n hÃ ng cá»§a khÃ¡ch hÃ ng cÃ³ `CustomerID = 1`**  
```sql
SELECT COUNT(*) AS OrdersByCustomer 
FROM Orders 
WHERE CustomerID = 1;
```
ğŸ”¹ **Káº¿t quáº£:** `2` (KhÃ¡ch hÃ ng 1 cÃ³ 2 Ä‘Æ¡n hÃ ng).  

---

## **5ï¸âƒ£ `SUM()` â€“ TÃ­nh tá»•ng**  

HÃ m `SUM()` giÃºp **tÃ­nh tá»•ng giÃ¡ trá»‹** cá»§a má»™t cá»™t sá»‘.  

ğŸ“Œ **TÃ­nh tá»•ng doanh thu cá»§a cá»­a hÃ ng**  
```sql
SELECT SUM(TotalAmount) AS TotalRevenue FROM Orders;
```
ğŸ”¹ **Káº¿t quáº£:** `6700` (Tá»•ng doanh thu tá»« táº¥t cáº£ Ä‘Æ¡n hÃ ng).  

ğŸ“Œ **TÃ­nh tá»•ng doanh thu cá»§a khÃ¡ch hÃ ng cÃ³ `CustomerID = 2`**  
```sql
SELECT SUM(TotalAmount) AS RevenueByCustomer 
FROM Orders 
WHERE CustomerID = 2;
```
ğŸ”¹ **Káº¿t quáº£:** `3200` (Doanh thu tá»« khÃ¡ch hÃ ng 2).  

---

## **6ï¸âƒ£ `AVG()` â€“ GiÃ¡ trá»‹ trung bÃ¬nh**  

HÃ m `AVG()` giÃºp **tÃ­nh giÃ¡ trá»‹ trung bÃ¬nh** cá»§a má»™t cá»™t sá»‘.  

ğŸ“Œ **TÃ­nh giÃ¡ trá»‹ trung bÃ¬nh cá»§a Ä‘Æ¡n hÃ ng**  
```sql
SELECT AVG(TotalAmount) AS AverageOrderValue FROM Orders;
```
ğŸ”¹ **Káº¿t quáº£:** `1116.67` (GiÃ¡ trá»‹ trung bÃ¬nh má»—i Ä‘Æ¡n hÃ ng).  

ğŸ“Œ **TÃ­nh trung bÃ¬nh giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng cá»§a khÃ¡ch hÃ ng 3**  
```sql
SELECT AVG(TotalAmount) AS AvgOrderValue 
FROM Orders 
WHERE CustomerID = 3;
```
ğŸ”¹ **Káº¿t quáº£:** `600` (KhÃ¡ch hÃ ng 3 cÃ³ trung bÃ¬nh 600/Ä‘Æ¡n).  

---

## **7ï¸âƒ£ `MIN()` & `MAX()` â€“ GiÃ¡ trá»‹ nhá» nháº¥t/lá»›n nháº¥t**  

HÃ m `MIN()` vÃ  `MAX()` giÃºp **tÃ¬m giÃ¡ trá»‹ nhá» nháº¥t hoáº·c lá»›n nháº¥t** trong má»™t cá»™t.  

ğŸ“Œ **TÃ¬m Ä‘Æ¡n hÃ ng cÃ³ giÃ¡ trá»‹ nhá» nháº¥t**  
```sql
SELECT MIN(TotalAmount) AS MinOrderValue FROM Orders;
```
ğŸ”¹ **Káº¿t quáº£:** `500` (ÄÆ¡n hÃ ng ráº» nháº¥t).  

ğŸ“Œ **TÃ¬m Ä‘Æ¡n hÃ ng cÃ³ giÃ¡ trá»‹ lá»›n nháº¥t**  
```sql
SELECT MAX(TotalAmount) AS MaxOrderValue FROM Orders;
```
ğŸ”¹ **Káº¿t quáº£:** `2000` (ÄÆ¡n hÃ ng lá»›n nháº¥t).  

ğŸ“Œ **TÃ¬m ngÃ y cÃ³ Ä‘Æ¡n hÃ ng lá»›n nháº¥t**  
```sql
SELECT OrderDate 
FROM Orders 
WHERE TotalAmount = (SELECT MAX(TotalAmount) FROM Orders);
```
ğŸ”¹ **Káº¿t quáº£:** `2024-02-23` (NgÃ y cÃ³ Ä‘Æ¡n hÃ ng lá»›n nháº¥t).  

---

## ğŸ“Œ **Quick Quiz** 

HÃ£y thá»­ viáº¿t cÃ¡c cÃ¢u lá»‡nh SQL Ä‘á»ƒ giáº£i cÃ¡c bÃ i táº­p sau:  

ğŸ‘‰ **BÃ i 1:** Äáº¿m sá»‘ khÃ¡ch hÃ ng cÃ³ trong báº£ng `Customers`.  
ğŸ‘‰ **BÃ i 2:** TÃ­nh tá»•ng doanh thu cá»§a táº¥t cáº£ Ä‘Æ¡n hÃ ng vÃ o ngÃ y `'2024-02-22'`.  
ğŸ‘‰ **BÃ i 3:** TÃ¬m táº¥t cáº£ Ä‘Æ¡n hÃ ng cÃ³ giÃ¡ trá»‹ **cao hÆ¡n giÃ¡ trá»‹ trung bÃ¬nh**.  
ğŸ‘‰ **BÃ i 4:** XÃ¡c Ä‘á»‹nh **ngÃ y cÃ³ giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng tháº¥p nháº¥t**.  
ğŸ‘‰ **BÃ i 5:** Äáº¿m sá»‘ lÆ°á»£ng Ä‘Æ¡n hÃ ng cÃ³ giÃ¡ trá»‹ **trÃªn 1000**.  

---

## **9ï¸âƒ£ TÃ i liá»‡u tham kháº£o** ğŸ“š  

1ï¸âƒ£ **Official SQL Documentation:**  
ğŸ”— [MySQL Aggregate Functions](https://dev.mysql.com/doc/refman/8.0/en/group-by-functions.html)  
ğŸ”— [PostgreSQL Aggregate Functions](https://www.postgresql.org/docs/current/functions-aggregate.html)  
ğŸ”— [SQL Server Aggregate Functions](https://learn.microsoft.com/en-us/sql/t-sql/functions/aggregate-functions-transact-sql)  

2ï¸âƒ£ **SÃ¡ch & KhÃ³a há»c:**  
ğŸ“˜ *SQL for Data Analysis* - Cathy Tanimura  
ğŸ“˜ *Learning SQL* - Alan Beaulieu  
ğŸ“ *[Mode Analytics SQL Tutorial](https://mode.com/sql-tutorial/)*  

---

#### âœ… **TÃ³m táº¯t bÃ i há»c**  

âœ”ï¸ **Aggregate Functions** giÃºp tÃ­nh toÃ¡n trÃªn nhiá»u dÃ²ng dá»¯ liá»‡u.  
âœ”ï¸ `COUNT()` - Äáº¿m sá»‘ dÃ²ng trong báº£ng.  
âœ”ï¸ `SUM()` - TÃ­nh tá»•ng giÃ¡ trá»‹.  
âœ”ï¸ `AVG()` - TÃ­nh giÃ¡ trá»‹ trung bÃ¬nh.  
âœ”ï¸ `MIN()` / `MAX()` - TÃ¬m giÃ¡ trá»‹ nhá» nháº¥t/lá»›n nháº¥t.  

ğŸš€ **Tiáº¿p theo:** Há»c vá» [`GROUP BY` vÃ  `HAVING`](09.%20GROUP%20BY%20-%20HAVING.md) Ä‘á»ƒ phÃ¢n nhÃ³m dá»¯ liá»‡u!

ğŸ“Œ **Lá»™ trÃ¬nh:** [Há»c SQL trong 30 ngÃ y](00.%2030-Day%20SQL%20Learning%20Roadmap.md)