---
title: 08. Aggregate Functions
slug: 08-aggregate-functions
description: Giá»›i thiá»‡u vá» cÃ¡c hÃ m tá»•ng há»£p trong SQL. Há»c cÃ¡ch sá»­ dá»¥ng cÃ¡c hÃ m tá»•ng há»£p Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c phÃ©p tÃ­nh trÃªn dá»¯ liá»‡u trong cÆ¡ sá»Ÿ dá»¯ liá»‡u.
image: https://tiennhm.github.io/img/docs/database.jpg
sidebar_position: 8
# sidebar_class_name: hidden
tags:
    - database
    - sql
    - learn-sql
    - roadmap
    - dbms
keywords: [database, sql, learn-sql, roadmap, dbms]
enableComments: true # for Gisqus comments, set to true
draft: false # set to true to hide this post from the site
---

> Má»¥c tiÃªu bÃ i há»c: Giá»›i thiá»‡u vá» cÃ¡c hÃ m tá»•ng há»£p trong SQL. Há»c cÃ¡ch sá»­ dá»¥ng cÃ¡c hÃ m tá»•ng há»£p Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c phÃ©p tÃ­nh trÃªn dá»¯ liá»‡u trong cÆ¡ sá»Ÿ dá»¯ liá»‡u.

HÃ´m nay, báº¡n sáº½ há»c vá» **hÃ m tá»•ng há»£p (Aggregate Functions)** trong SQL, giÃºp tÃ­nh toÃ¡n cÃ¡c giÃ¡ trá»‹ tá»« nhiá»u hÃ ng dá»¯ liá»‡u.  

---

## **1ï¸âƒ£ Aggregate Functions lÃ  gÃ¬?**  
CÃ¡c hÃ m tá»•ng há»£p giÃºp **tÃ³m táº¯t dá»¯ liá»‡u** tá»« nhiá»u hÃ ng trong báº£ng:  

| HÃ m           | CÃ´ng dá»¥ng                          |
|---------------|------------------------------------|
| `COUNT(*)`    | Äáº¿m sá»‘ hÃ ng trong báº£ng             |
| `SUM(column)` | TÃ­nh tá»•ng giÃ¡ trá»‹ trong má»™t cá»™t sá»‘ |
| `AVG(column)` | TÃ­nh giÃ¡ trá»‹ trung bÃ¬nh            |
| `MIN(column)` | Láº¥y giÃ¡ trá»‹ nhá» nháº¥t               |
| `MAX(column)` | Láº¥y giÃ¡ trá»‹ lá»›n nháº¥t               |

---

## **2ï¸âƒ£ Chuáº©n bá»‹ dá»¯ liá»‡u**  
Náº¿u chÆ°a cÃ³ database, cháº¡y lá»‡nh nÃ y Ä‘á»ƒ táº¡o láº¡i:  

```sql
CREATE DATABASE ShopDB;
USE ShopDB;

CREATE TABLE Orders (
    ID INT AUTO_INCREMENT PRIMARY KEY,
    CustomerID INT NOT NULL,
    TotalAmount FLOAT NOT NULL,
    OrderDate DATE NOT NULL
);

INSERT INTO Orders (CustomerID, TotalAmount, OrderDate) VALUES
(1, 1500, '2024-02-20'),
(2, 1200, '2024-02-21'),
(3, 500, '2024-02-22'),
(1, 800, '2024-02-22'),
(2, 2000, '2024-02-23'),
(3, 700, '2024-02-23');
```

---

## **3ï¸âƒ£ HÃ m COUNT() - Äáº¿m sá»‘ dÃ²ng**  
ğŸ“Œ **Äáº¿m sá»‘ Ä‘Æ¡n hÃ ng trong báº£ng `Orders`**  
```sql
SELECT COUNT(*) AS TotalOrders FROM Orders;
```
âœ… Káº¿t quáº£: `6` (CÃ³ 6 Ä‘Æ¡n hÃ ng).  

ğŸ“Œ **Äáº¿m sá»‘ Ä‘Æ¡n hÃ ng cá»§a khÃ¡ch hÃ ng cÃ³ `CustomerID = 1`**  
```sql
SELECT COUNT(*) AS OrdersByCustomer 
FROM Orders 
WHERE CustomerID = 1;
```
âœ… Káº¿t quáº£: `2` (KhÃ¡ch hÃ ng 1 cÃ³ 2 Ä‘Æ¡n hÃ ng).  

---

## **4ï¸âƒ£ HÃ m SUM() - TÃ­nh tá»•ng**  
ğŸ“Œ **TÃ­nh tá»•ng doanh thu (tá»•ng giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng)**  
```sql
SELECT SUM(TotalAmount) AS TotalRevenue 
FROM Orders;
```
âœ… Káº¿t quáº£: `6700` (Tá»•ng doanh thu cá»§a cá»­a hÃ ng).  

ğŸ“Œ **TÃ­nh tá»•ng doanh thu cá»§a `CustomerID = 2`**  
```sql
SELECT SUM(TotalAmount) AS RevenueByCustomer 
FROM Orders 
WHERE CustomerID = 2;
```
âœ… Káº¿t quáº£: `3200` (Doanh thu tá»« khÃ¡ch hÃ ng 2).  

---

## **5ï¸âƒ£ HÃ m AVG() - GiÃ¡ trá»‹ trung bÃ¬nh**  
ğŸ“Œ **TÃ­nh giÃ¡ trá»‹ trung bÃ¬nh cá»§a cÃ¡c Ä‘Æ¡n hÃ ng**  
```sql
SELECT AVG(TotalAmount) AS AverageOrderValue 
FROM Orders;
```
âœ… Káº¿t quáº£: `1116.67` (GiÃ¡ trá»‹ trung bÃ¬nh má»—i Ä‘Æ¡n hÃ ng).  

ğŸ“Œ **TÃ­nh giÃ¡ trá»‹ trung bÃ¬nh Ä‘Æ¡n hÃ ng cá»§a khÃ¡ch hÃ ng 3**  
```sql
SELECT AVG(TotalAmount) AS AvgOrderValue 
FROM Orders 
WHERE CustomerID = 3;
```
âœ… Káº¿t quáº£: `600` (KhÃ¡ch hÃ ng 3 cÃ³ trung bÃ¬nh 600/Ä‘Æ¡n).  

---

## **6ï¸âƒ£ HÃ m MIN() & MAX() - GiÃ¡ trá»‹ nhá» nháº¥t/lá»›n nháº¥t**  
ğŸ“Œ **TÃ¬m Ä‘Æ¡n hÃ ng cÃ³ giÃ¡ trá»‹ nhá» nháº¥t**  
```sql
SELECT MIN(TotalAmount) AS MinOrderValue 
FROM Orders;
```
âœ… Káº¿t quáº£: `500` (ÄÆ¡n hÃ ng ráº» nháº¥t).  

ğŸ“Œ **TÃ¬m Ä‘Æ¡n hÃ ng cÃ³ giÃ¡ trá»‹ lá»›n nháº¥t**  
```sql
SELECT MAX(TotalAmount) AS MaxOrderValue 
FROM Orders;
```
âœ… Káº¿t quáº£: `2000` (ÄÆ¡n hÃ ng lá»›n nháº¥t).  

ğŸ“Œ **TÃ¬m ngÃ y cÃ³ Ä‘Æ¡n hÃ ng lá»›n nháº¥t**  
```sql
SELECT OrderDate 
FROM Orders 
WHERE TotalAmount = (SELECT MAX(TotalAmount) FROM Orders);
```
âœ… Káº¿t quáº£: `2024-02-23` (NgÃ y cÃ³ Ä‘Æ¡n hÃ ng lá»›n nháº¥t).  

---

## **7ï¸âƒ£ BÃ i táº­p thá»­ thÃ¡ch ğŸš€**  
ğŸ‘‰ **BÃ i 1:** TÃ¬m tá»•ng sá»‘ khÃ¡ch hÃ ng trong báº£ng `Customers`.  
ğŸ‘‰ **BÃ i 2:** TÃ­nh tá»•ng doanh thu cá»§a táº¥t cáº£ Ä‘Æ¡n hÃ ng vÃ o ngÃ y `'2024-02-22'`.  
ğŸ‘‰ **BÃ i 3:** TÃ¬m Ä‘Æ¡n hÃ ng cÃ³ giÃ¡ trá»‹ trung bÃ¬nh cao hÆ¡n `1000`.  
ğŸ‘‰ **BÃ i 4:** XÃ¡c Ä‘á»‹nh ngÃ y cÃ³ giÃ¡ trá»‹ Ä‘Æ¡n hÃ ng tháº¥p nháº¥t.  
ğŸ‘‰ **BÃ i 5:** Äáº¿m sá»‘ lÆ°á»£ng Ä‘Æ¡n hÃ ng cÃ³ giÃ¡ trá»‹ trÃªn `1000`.  

---

âœ… **TÃ³m táº¯t NgÃ y 8:**  
âœ”ï¸ `COUNT()` - Äáº¿m sá»‘ dÃ²ng trong báº£ng.  
âœ”ï¸ `SUM()` - TÃ­nh tá»•ng giÃ¡ trá»‹.  
âœ”ï¸ `AVG()` - TÃ­nh giÃ¡ trá»‹ trung bÃ¬nh.  
âœ”ï¸ `MIN()` / `MAX()` - TÃ¬m giÃ¡ trá»‹ nhá» nháº¥t/lá»›n nháº¥t.  

ğŸš€ **Tiáº¿p theo:** Há»c vá» [`GROUP BY` vÃ  `HAVING`](09.%20GROUP%20BY%20-%20HAVING.md) Ä‘á»ƒ phÃ¢n nhÃ³m dá»¯ liá»‡u!

ğŸ“Œ **Lá»™ trÃ¬nh:** [Há»c SQL trong 30 ngÃ y](00.%2030-Day%20SQL%20Learning%20Roadmap.md)