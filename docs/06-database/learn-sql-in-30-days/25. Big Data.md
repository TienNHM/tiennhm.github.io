---
title: 25. Big Data
slug: 25-big-data
description: L√†m vi·ªác v·ªõi d·ªØ li·ªáu l·ªõn (Big Data) trong SQL - Partitioning, Sharding, Compression.
image: https://tiennhm.github.io/img/docs/database.jpg
sidebar_position: 25
# sidebar_class_name: hidden
tags:
    - database
    - sql
    - learn-sql
    - roadmap
    - dbms
keywords: [database, sql, learn-sql, roadmap, dbms]
enableComments: true # for Gisqus comments, set to true
draft: false # set to true to hide this post from the site
---

# **Ng√†y 25: L√†m vi·ªác v·ªõi d·ªØ li·ªáu l·ªõn (Big Data)**  

#### üéØ **M·ª•c ti√™u h·ªçc t·∫≠p**
- Hi·ªÉu kh√°i ni·ªám d·ªØ li·ªáu l·ªõn trong SQL.
- T·ªëi ∆∞u h√≥a hi·ªáu su·∫•t truy v·∫•n v·ªõi **Partitioning (Ph√¢n v√πng b·∫£ng)**.
- S·ª≠ d·ª•ng **Sharding (Chia nh·ªè d·ªØ li·ªáu)** v√† **Compression (N√©n d·ªØ li·ªáu)** ƒë·ªÉ c·∫£i thi·ªán hi·ªáu su·∫•t.

---

## üìù **1. Kh√°i ni·ªám d·ªØ li·ªáu l·ªõn trong SQL**
D·ªØ li·ªáu l·ªõn (Big Data) ƒë·ªÅ c·∫≠p ƒë·∫øn t·∫≠p d·ªØ li·ªáu c√≥ dung l∆∞·ª£ng qu√° l·ªõn ƒë·ªÉ x·ª≠ l√Ω b·∫±ng c√°c ph∆∞∆°ng ph√°p truy·ªÅn th·ªëng. Trong SQL, l√†m vi·ªác v·ªõi d·ªØ li·ªáu l·ªõn c·∫ßn ch√∫ √Ω ƒë·∫øn:
- **Partitioning (Ph√¢n v√πng b·∫£ng)**
- **Sharding (Chia nh·ªè d·ªØ li·ªáu)**
- **Indexing (Ch·ªâ m·ª•c)**
- **Compression (N√©n d·ªØ li·ªáu)**

---

## üìù **2. Partitioning (Ph√¢n v√πng b·∫£ng)**  
**Partitioning** gi√∫p chia nh·ªè b·∫£ng l·ªõn th√†nh nhi·ªÅu ph·∫ßn nh·ªè h∆°n, gi√∫p tƒÉng t·ªëc truy v·∫•n. C√≥ 3 lo·∫°i ph√¢n v√πng ph·ªï bi·∫øn:

### **üîπ 2.1. Range Partitioning (Ph√¢n v√πng theo kho·∫£ng)**
Chia d·ªØ li·ªáu th√†nh c√°c v√πng d·ª±a tr√™n gi√° tr·ªã c·ªßa m·ªôt c·ªôt, v√≠ d·ª•: ph√¢n v√πng d·ªØ li·ªáu theo nƒÉm.

üîπ **V√≠ d·ª• (PostgreSQL):**
```sql
CREATE TABLE sales (
    id SERIAL PRIMARY KEY,
    sale_date DATE NOT NULL,
    amount DECIMAL(10,2) NOT NULL
) PARTITION BY RANGE (sale_date);

CREATE TABLE sales_2023 PARTITION OF sales
FOR VALUES FROM ('2023-01-01') TO ('2023-12-31');

CREATE TABLE sales_2024 PARTITION OF sales
FOR VALUES FROM ('2024-01-01') TO ('2024-12-31');
```

---

### **üîπ 2.2. List Partitioning (Ph√¢n v√πng theo danh s√°ch)**
Ph√¢n v√πng d·ªØ li·ªáu theo danh s√°ch gi√° tr·ªã c·ª• th·ªÉ, v√≠ d·ª•: chia d·ªØ li·ªáu theo khu v·ª±c.

üîπ **V√≠ d·ª• (PostgreSQL):**
```sql
CREATE TABLE customers (
    id SERIAL PRIMARY KEY,
    region TEXT NOT NULL
) PARTITION BY LIST (region);

CREATE TABLE customers_vietnam PARTITION OF customers
FOR VALUES IN ('Vietnam');

CREATE TABLE customers_usa PARTITION OF customers
FOR VALUES IN ('USA');
```

---

### **üîπ 2.3. Hash Partitioning (Ph√¢n v√πng theo bƒÉm)**
Ph√¢n v√πng d·ªØ li·ªáu b·∫±ng c√°ch bƒÉm gi√° tr·ªã c·ªßa m·ªôt c·ªôt.

üîπ **V√≠ d·ª• (PostgreSQL):**
```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_id INT NOT NULL
) PARTITION BY HASH (customer_id);

CREATE TABLE orders_p0 PARTITION OF orders FOR VALUES WITH (MODULUS 4, REMAINDER 0);
CREATE TABLE orders_p1 PARTITION OF orders FOR VALUES WITH (MODULUS 4, REMAINDER 1);
```

---

## üìù **3. Sharding (Chia nh·ªè d·ªØ li·ªáu)**
**Sharding** l√† k·ªπ thu·∫≠t chia nh·ªè d·ªØ li·ªáu th√†nh nhi·ªÅu m√°y ch·ªß kh√°c nhau.  
V√≠ d·ª•: M·ªôt h·ªá th·ªëng l∆∞u tr·ªØ kh√°ch h√†ng tr√™n 2 server:
- **Server 1:** Ch·ª©a kh√°ch h√†ng c√≥ `id` t·ª´ 1-500000.
- **Server 2:** Ch·ª©a kh√°ch h√†ng c√≥ `id` t·ª´ 500001 tr·ªü ƒëi.

üí° **L∆∞u √Ω:** Sharding th∆∞·ªùng √°p d·ª•ng cho c√°c h·ªá th·ªëng c√≥ d·ªØ li·ªáu l·ªõn v√† y√™u c·∫ßu m·ªü r·ªông theo chi·ªÅu ngang (horizontal scaling).

---

## üìù **4. Compression (N√©n d·ªØ li·ªáu)**
D·ªØ li·ªáu l·ªõn c√≥ th·ªÉ l√†m ch·∫≠m truy v·∫•n, v√¨ v·∫≠y c·∫ßn s·ª≠ d·ª•ng **n√©n d·ªØ li·ªáu** ƒë·ªÉ gi·∫£m k√≠ch th∆∞·ªõc l∆∞u tr·ªØ.

üîπ **V√≠ d·ª• (PostgreSQL - N√©n c·ªôt d·ªØ li·ªáu)**
```sql
ALTER TABLE sales
SET (storage = EXTERNAL);
```

üîπ **V√≠ d·ª• (MySQL - S·ª≠ d·ª•ng InnoDB compression)**
```sql
CREATE TABLE sales (
    id INT PRIMARY KEY,
    sale_date DATE NOT NULL,
    amount DECIMAL(10,2) NOT NULL
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8;
```

---

## üéØ **B√†i t·∫≠p th·ª±c h√†nh & G·ª£i √Ω ƒë√°p √°n**

### **B√†i 1: T·∫°o b·∫£ng `orders` v√† ph√¢n v√πng theo nƒÉm**
#### **Y√™u c·∫ßu:**  
- T·∫°o b·∫£ng `orders` g·ªìm c√°c c·ªôt `id`, `order_date`, `amount`.
- Ph√¢n v√πng theo nƒÉm 2023 v√† 2024.

üîπ **G·ª£i √Ω ƒë√°p √°n (PostgreSQL)**
```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    order_date DATE NOT NULL,
    amount DECIMAL(10,2) NOT NULL
) PARTITION BY RANGE (order_date);

CREATE TABLE orders_2023 PARTITION OF orders
FOR VALUES FROM ('2023-01-01') TO ('2023-12-31');

CREATE TABLE orders_2024 PARTITION OF orders
FOR VALUES FROM ('2024-01-01') TO ('2024-12-31');
```

---

### **B√†i 2: T·∫°o b·∫£ng `customers` v√† ph√¢n v√πng theo qu·ªëc gia**
#### **Y√™u c·∫ßu:**  
- T·∫°o b·∫£ng `customers` g·ªìm c√°c c·ªôt `id`, `name`, `region`.
- Ph√¢n v√πng d·ªØ li·ªáu theo `Vietnam` v√† `USA`.

üîπ **G·ª£i √Ω ƒë√°p √°n (PostgreSQL)**
```sql
CREATE TABLE customers (
    id SERIAL PRIMARY KEY,
    name TEXT NOT NULL,
    region TEXT NOT NULL
) PARTITION BY LIST (region);

CREATE TABLE customers_vietnam PARTITION OF customers
FOR VALUES IN ('Vietnam');

CREATE TABLE customers_usa PARTITION OF customers
FOR VALUES IN ('USA');
```

---

### **B√†i 3: Ph√¢n v√πng b·∫£ng `sales` theo bƒÉm**
#### **Y√™u c·∫ßu:**  
- T·∫°o b·∫£ng `sales` g·ªìm c√°c c·ªôt `id`, `customer_id`, `amount`.
- Ph√¢n v√πng b·∫£ng theo `customer_id` th√†nh 3 ph·∫ßn.

üîπ **G·ª£i √Ω ƒë√°p √°n (PostgreSQL)**
```sql
CREATE TABLE sales (
    id SERIAL PRIMARY KEY,
    customer_id INT NOT NULL,
    amount DECIMAL(10,2) NOT NULL
) PARTITION BY HASH (customer_id);

CREATE TABLE sales_p0 PARTITION OF sales FOR VALUES WITH (MODULUS 3, REMAINDER 0);
CREATE TABLE sales_p1 PARTITION OF sales FOR VALUES WITH (MODULUS 3, REMAINDER 1);
CREATE TABLE sales_p2 PARTITION OF sales FOR VALUES WITH (MODULUS 3, REMAINDER 2);
```

---

#### üìå **T√≥m t·∫Øt b√†i h·ªçc**
- **Partitioning:** Gi√∫p chia nh·ªè b·∫£ng l·ªõn th√†nh nhi·ªÅu ph·∫ßn ƒë·ªÉ truy v·∫•n nhanh h∆°n.
- **Sharding:** Chia d·ªØ li·ªáu th√†nh nhi·ªÅu m√°y ch·ªß kh√°c nhau ƒë·ªÉ m·ªü r·ªông h·ªá th·ªëng.
- **Compression:** Gi·∫£m k√≠ch th∆∞·ªõc l∆∞u tr·ªØ v√† tƒÉng t·ªëc truy v·∫•n.

---

üöÄ **Ti·∫øp theo:** So s√°nh SQL & NoSQL.

üìå **L·ªô tr√¨nh:** [H·ªçc SQL trong 30 ng√†y](00.%2030-Day%20SQL%20Learning%20Roadmap.md).