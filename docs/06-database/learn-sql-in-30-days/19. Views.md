---
title: 19. Views
slug: 19-views
description: TÃ¬m hiá»ƒu cÃ¡ch sá»­ dá»¥ng Views Ä‘á»ƒ Ä‘Æ¡n giáº£n hÃ³a truy váº¥n trong SQL.
image: https://tiennhm.github.io/img/docs/database.jpg
sidebar_position: 19
tags:
    - database
    - sql
    - learn-sql
    - roadmap
    - dbms
keywords: [database, sql, learn-sql, roadmap, dbms]
enableComments: true
draft: false
---

> Má»¥c tiÃªu bÃ i há»c: Hiá»ƒu cÃ¡ch táº¡o vÃ  sá»­ dá»¥ng **Views** Ä‘á»ƒ Ä‘Æ¡n giáº£n hÃ³a truy váº¥n SQL.

---

## ğŸ“Œ **1. View lÃ  gÃ¬?**  
**View** lÃ  má»™t báº£ng áº£o Ä‘Æ°á»£c táº¡o tá»« káº¿t quáº£ cá»§a má»™t truy váº¥n SQL. NÃ³ giÃºp:

âœ” Giáº£m Ä‘á»™ phá»©c táº¡p cá»§a truy váº¥n.  
âœ” Báº£o máº­t dá»¯ liá»‡u báº±ng cÃ¡ch áº©n Ä‘i cÃ¡c cá»™t nháº¡y cáº£m.  
âœ” GiÃºp tÃ¡i sá»­ dá»¥ng truy váº¥n phá»©c táº¡p má»™t cÃ¡ch dá»… dÃ ng.  

ğŸ’¡ **VÃ­ dá»¥:** Táº¡o má»™t View hiá»ƒn thá»‹ danh sÃ¡ch Ä‘Æ¡n hÃ ng kÃ¨m thÃ´ng tin khÃ¡ch hÃ ng thay vÃ¬ pháº£i JOIN nhiá»u báº£ng.

---

## ğŸ›  **2. CÃ¡ch táº¡o View trong SQL**  

### **Cáº¥u trÃºc cÆ¡ báº£n**
```sql
CREATE VIEW view_name AS
SELECT column1, column2, ...
FROM table_name
WHERE condition;
```

ğŸ”¹ Sau khi táº¡o, cÃ³ thá»ƒ sá»­ dá»¥ng View nhÆ° má»™t báº£ng thÃ´ng thÆ°á»ng:
```sql
SELECT * FROM view_name;
```

---

## âš™ï¸ **3. VÃ­ dá»¥ thá»±c táº¿: ÄÆ¡n giáº£n hÃ³a truy váº¥n**  

### **1ï¸âƒ£ Táº¡o báº£ng khÃ¡ch hÃ ng (`customers`)**
```sql
CREATE TABLE customers (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100),
    email VARCHAR(100),
    phone VARCHAR(20)
);
```

### **2ï¸âƒ£ Táº¡o báº£ng Ä‘Æ¡n hÃ ng (`orders`)**
```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_id INT REFERENCES customers(id),
    total_amount DECIMAL(10,2),
    order_date DATE
);
```

### **3ï¸âƒ£ Táº¡o View hiá»ƒn thá»‹ danh sÃ¡ch Ä‘Æ¡n hÃ ng kÃ¨m thÃ´ng tin khÃ¡ch hÃ ng**
```sql
CREATE VIEW customer_orders AS
    SELECT
        o.id AS order_id, 
        c.name AS customer_name, 
        o.total_amount, 
        o.order_date
    FROM orders o
    JOIN customers c ON o.customer_id = c.id;
```
ğŸ”¹ **Sá»­ dá»¥ng View thay vÃ¬ JOIN thá»§ cÃ´ng:**
```sql
SELECT * FROM customer_orders;
```
ğŸ‘‰ View giÃºp Ä‘Æ¡n giáº£n hÃ³a truy váº¥n vÃ  dá»… Ä‘á»c hÆ¡n.

---

## ğŸ”„ **4. Cáº­p nháº­t View**  

### **Sá»­a Ä‘á»•i View**
```sql
CREATE OR REPLACE VIEW customer_orders AS
    SELECT 
        o.id AS order_id, 
        c.name AS customer_name, 
        c.email, 
        o.total_amount, 
        o.order_date
    FROM orders o
    JOIN customers c ON o.customer_id = c.id;
```
ğŸ”¹ **`CREATE OR REPLACE VIEW`** giÃºp cáº­p nháº­t View mÃ  khÃ´ng cáº§n xÃ³a.

### **XÃ³a View**
```sql
DROP VIEW customer_orders;
```

---

## ğŸš¨ **5. View cÃ³ cáº­p nháº­t Ä‘Æ°á»£c khÃ´ng?**  
âœ… CÃ³ thá»ƒ UPDATE/DELETE/INSERT náº¿u View liÃªn káº¿t vá»›i má»™t báº£ng duy nháº¥t vÃ  khÃ´ng chá»©a:
- `GROUP BY`, `HAVING`, `DISTINCT`
- `JOIN` nhiá»u báº£ng
- HÃ m tá»•ng há»£p (`SUM`, `AVG`, `COUNT`,...)

ğŸ’¡ **VÃ­ dá»¥: Cáº­p nháº­t dá»¯ liá»‡u qua View**
```sql
UPDATE customer_orders 
SET total_amount = 500 
WHERE order_id = 1;
```
ğŸ‘‰ Náº¿u View khÃ´ng há»— trá»£ cáº­p nháº­t, cáº§n sá»­ dá»¥ng **`INSTEAD OF TRIGGER`**.

---

## ğŸ¯ **6. BÃ i táº­p thá»±c hÃ nh**  

### âœ… **BÃ i 1: Táº¡o View hiá»ƒn thá»‹ tá»•ng doanh thu theo khÃ¡ch hÃ ng**  
> Viáº¿t View hiá»ƒn thá»‹ `customer_id`, `customer_name`, vÃ  `total_spent` (tá»•ng tiá»n Ä‘Ã£ chi tiÃªu).  

ğŸ’¡ **Gá»£i Ã½ lá»i giáº£i:**
```sql
CREATE VIEW customer_spending AS
    SELECT 
        c.id AS customer_id, 
        c.name AS customer_name, 
        SUM(o.total_amount) AS total_spent
    FROM customers c
    JOIN orders o ON c.id = o.customer_id
    GROUP BY c.id, c.name;
```

---

### âœ… **BÃ i 2: Táº¡o View chá»‰ hiá»ƒn thá»‹ khÃ¡ch hÃ ng VIP (tá»•ng chi tiÃªu > 1000$)**  
> Viáº¿t View chá»‰ láº¥y khÃ¡ch hÃ ng cÃ³ tá»•ng chi tiÃªu lá»›n hÆ¡n 1000$ tá»« View `customer_spending`.

ğŸ’¡ **Gá»£i Ã½ lá»i giáº£i:**
```sql
CREATE VIEW vip_customers AS
    SELECT * 
    FROM customer_spending 
    WHERE total_spent > 1000;
```
ğŸ‘‰ Giá» chá»‰ cáº§n `SELECT * FROM vip_customers;` lÃ  láº¥y Ä‘Æ°á»£c danh sÃ¡ch khÃ¡ch hÃ ng VIP.

---

## ğŸ”¥ **TÃ³m táº¯t bÃ i há»c NgÃ y 19**  
âœ… **Views** giÃºp Ä‘Æ¡n giáº£n hÃ³a truy váº¥n SQL.  
âœ… **CÃº phÃ¡p:** `CREATE VIEW view_name AS SELECT ...`.  
âœ… **CÃ³ thá»ƒ UPDATE/DELETE/INSERT trÃªn View** náº¿u nÃ³ liÃªn káº¿t vá»›i má»™t báº£ng duy nháº¥t.  
âœ… **Thá»±c hÃ nh:** Táº¡o View tá»•ng doanh thu khÃ¡ch hÃ ng, lá»c khÃ¡ch hÃ ng VIP.  

---

ğŸš€ **Tiáº¿p theo:** [PhÃ¢n tÃ­ch hiá»‡u suáº¥t truy váº¥n.](20.%20Query%20performance.md)

ğŸ“Œ **Lá»™ trÃ¬nh:** [Há»c SQL trong 30 ngÃ y](00.%2030-Day%20SQL%20Learning%20Roadmap.md).

