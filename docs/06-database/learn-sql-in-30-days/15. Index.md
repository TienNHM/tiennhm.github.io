---
title: 15. Index
slug: 15-index
description: Gi·ªõi thi·ªáu v·ªÅ Index trong SQL, c√°ch t·∫°o v√† s·ª≠ d·ª•ng Index, c√°ch t·ªëi ∆∞u truy v·∫•n SQL v·ªõi Index.
image: https://tiennhm.github.io/img/docs/database.jpg
sidebar_position: 15
# sidebar_class_name: hidden
tags:
    - database
    - sql
    - learn-sql
    - roadmap
    - dbms
keywords: [database, sql, learn-sql, roadmap, dbms]
enableComments: true # for Gisqus comments, set to true
draft: false # set to true to hide this post from the site
---

> M·ª•c ti√™u b√†i h·ªçc: Gi·ªõi thi·ªáu v·ªÅ Index trong SQL, c√°ch t·∫°o v√† s·ª≠ d·ª•ng Index, c√°ch t·ªëi ∆∞u truy v·∫•n SQL v·ªõi Index.

---

## **1Ô∏è‚É£ Ch·ªâ m·ª•c (Index) l√† g√¨?**  
Ch·ªâ m·ª•c l√† m·ªôt c·∫•u tr√∫c d·ªØ li·ªáu gi√∫p t·ªëi ∆∞u h√≥a hi·ªáu su·∫•t truy v·∫•n tr√™n b·∫£ng l·ªõn.  
- Khi kh√¥ng c√≥ **Index**, SQL ph·∫£i duy·ªát **t·∫•t c·∫£ c√°c h√†ng** trong b·∫£ng ƒë·ªÉ t√¨m d·ªØ li·ªáu.  
- Khi c√≥ **Index**, SQL s·ª≠ d·ª•ng m·ªôt **c·∫•u tr√∫c t·ªëi ∆∞u** (B-Tree, Hash, v.v.) ƒë·ªÉ truy v·∫•n nhanh h∆°n.  

**V√≠ d·ª•:**  
üîπ **Kh√¥ng c√≥ index:** B·∫°n t√¨m t√™n c·ªßa m·ªôt ng∆∞·ªùi trong danh b·∫° 100.000 ng∆∞·ªùi, b·∫°n ph·∫£i ki·ªÉm tra t·ª´ng d√≤ng.  
üîπ **C√≥ index:** B·∫°n s·ª≠ d·ª•ng m·ª•c l·ª•c theo ch·ªØ c√°i ƒë·ªÉ t√¨m nhanh h∆°n.  

---

## **2Ô∏è‚É£ Khi n√†o n√™n s·ª≠ d·ª•ng Index?**  
‚úÖ **N√™n d√πng khi:**  
- Truy v·∫•n th∆∞·ªùng xuy√™n l·ªçc d·ªØ li·ªáu b·∫±ng `WHERE`.  
- S·∫Øp x·∫øp d·ªØ li·ªáu (`ORDER BY`, `GROUP BY`).  
- K·∫øt h·ª£p b·∫£ng (`JOIN`).  

‚ùå **Kh√¥ng n√™n d√πng khi:**  
- B·∫£ng c√≥ **√≠t d·ªØ li·ªáu** (ch·ªâ v√†i trƒÉm d√≤ng, index c√≥ th·ªÉ l√†m ch·∫≠m ch√®n/x√≥a).  
- C·ªôt c√≥ **nhi·ªÅu gi√° tr·ªã tr√πng nhau** (v√≠ d·ª•: c·ªôt `is_active` ch·ªâ c√≥ `TRUE/FALSE`).  

---

## **3Ô∏è‚É£ C√°c lo·∫°i Index ph·ªï bi·∫øn**  

| Lo·∫°i Index                  | M√¥ t·∫£ | Khi n√†o d√πng? |
|-----------------------------|--------|---------------|
| **B-Tree Index** (m·∫∑c ƒë·ªãnh) | TƒÉng t·ªëc truy v·∫•n v·ªõi `=`, `<`, `>`, `BETWEEN` | C·ªôt c√≥ gi√° tr·ªã ph√¢n t√°n ƒë·ªÅu |
| **Unique Index**            | ƒê·∫£m b·∫£o gi√° tr·ªã duy nh·∫•t (v√≠ d·ª•: email) | C·ªôt c√≥ gi√° tr·ªã kh√¥ng tr√πng |
| **Composite Index**         | Ch·ªâ m·ª•c tr√™n **nhi·ªÅu c·ªôt** c√πng l√∫c | Truy v·∫•n c√≥ ƒëi·ªÅu ki·ªán tr√™n nhi·ªÅu c·ªôt |
| **Full-Text Index**         | D√πng ƒë·ªÉ t√¨m ki·∫øm vƒÉn b·∫£n nhanh | C·ªôt ki·ªÉu `TEXT` |

---

## **4Ô∏è‚É£ Th·ª±c h√†nh: T·∫°o Index trong SQL**  

### **üìå B·∫£ng `orders` (ƒë∆°n h√†ng)**
```sql
CREATE TABLE orders (
    id SERIAL PRIMARY KEY,
    customer_id INT NOT NULL,
    total_amount DECIMAL(10,2) NOT NULL,
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### **üîπ T·∫°o Index tr√™n c·ªôt `order_date`**
```sql
CREATE INDEX idx_order_date ON orders(order_date);
```

üëâ **T·ªëi ∆∞u h√≥a** truy v·∫•n:
```sql
SELECT * FROM orders WHERE order_date > '2024-01-01';
```

### **üîπ T·∫°o Composite Index tr√™n `customer_id` v√† `order_date`**
```sql
CREATE INDEX idx_customer_order ON orders(customer_id, order_date);
```

üëâ **T·ªëi ∆∞u h√≥a** truy v·∫•n:
```sql
SELECT * FROM orders WHERE customer_id = 10 ORDER BY order_date DESC;
```

### **üîπ Xem danh s√°ch Index trong b·∫£ng**
```sql
SELECT indexname, indexdef FROM pg_indexes WHERE tablename = 'orders';
```

---

## **5Ô∏è‚É£ So s√°nh hi·ªáu su·∫•t truy v·∫•n tr∆∞·ªõc & sau khi c√≥ Index**  
üìå **D√πng `EXPLAIN ANALYZE` ƒë·ªÉ ki·ªÉm tra t·ªëc ƒë·ªô truy v·∫•n:**  
```sql
EXPLAIN ANALYZE SELECT * FROM orders WHERE order_date > '2024-01-01';
```

- **Tr∆∞·ªõc khi c√≥ Index:** SQL ph·∫£i qu√©t to√†n b·ªô b·∫£ng (**Sequential Scan**).  
- **Sau khi c√≥ Index:** SQL s·ª≠ d·ª•ng **Index Scan**, nhanh h∆°n nhi·ªÅu.  

---

## **6Ô∏è‚É£ B√†i t·∫≠p th·ª±c h√†nh** üéØ  
‚úÖ **B√†i 1:**  
T·∫°o index tr√™n b·∫£ng `customers` v·ªõi c·ªôt `email`:  
```sql
CREATE UNIQUE INDEX idx_customer_email ON customers(email);
```

‚úÖ **B√†i 2:**  
T·∫°o Composite Index tr√™n b·∫£ng `products` v·ªõi `category_id` v√† `price`:  
```sql
CREATE INDEX idx_category_price ON products(category_id, price);
```

‚úÖ **B√†i 3:**  
So s√°nh hi·ªáu su·∫•t truy v·∫•n tr∆∞·ªõc & sau khi c√≥ index b·∫±ng `EXPLAIN ANALYZE`:  
```sql
EXPLAIN ANALYZE SELECT * FROM products WHERE category_id = 2 ORDER BY price DESC;
```

---

## **T√≥m t·∫Øt b√†i h·ªçc Ng√†y 15** üìå  
- **Ch·ªâ m·ª•c (Index)** gi√∫p tƒÉng t·ªëc truy v·∫•n nh∆∞ng kh√¥ng ph·∫£i l√∫c n√†o c≈©ng c·∫ßn.  
- **C√°c lo·∫°i Index ph·ªï bi·∫øn:** B-Tree, Unique, Composite, Full-Text.  
- **D√πng `EXPLAIN ANALYZE`** ƒë·ªÉ ki·ªÉm tra t·ªëc ƒë·ªô truy v·∫•n.  
- **B√†i t·∫≠p th·ª±c h√†nh:** T·∫°o index tr√™n b·∫£ng l·ªõn v√† so s√°nh hi·ªáu su·∫•t.  

üöÄ **Ng√†y mai:** Transactions & ACID.

üìå **L·ªô tr√¨nh:** [H·ªçc SQL trong 30 ng√†y](00.%2030-Day%20SQL%20Learning%20Roadmap.md)