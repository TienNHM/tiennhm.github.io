"use strict";(self.webpackChunktiennhm_github_io=self.webpackChunktiennhm_github_io||[]).push([[3776],{11864:(n,s,i)=>{i.r(s),i.d(s,{assets:()=>l,contentTitle:()=>h,default:()=>o,frontMatter:()=>t,metadata:()=>d,toc:()=>c});var e=i(74848),r=i(28453);const t={title:"28. SQL query optimization",slug:"28-sql-query-optimization",description:"H\u01b0\u1edbng d\u1eabn t\u1ed1i \u01b0u h\xf3a truy v\u1ea5n SQL, ph\xe2n t\xedch truy v\u1ea5n v\u1edbi EXPLAIN ANALYZE, tr\xe1nh l\u1ed7i ph\u1ed5 bi\u1ebfn khi vi\u1ebft SQL, t\u1eadn d\u1ee5ng Index, Partition, Caching \u0111\u1ec3 t\u0103ng hi\u1ec7u su\u1ea5t.",image:"https://tiennhm.github.io/img/docs/database.jpg",sidebar_position:28,tags:["database","sql","learn-sql","roadmap","dbms"],keywords:["database","sql","learn-sql","roadmap","dbms"],enableComments:!0,draft:!1},h="\ud83d\udccc Ng\xe0y 28: T\u1ed1i \u01afu H\xf3a Truy V\u1ea5n & Debug SQL N\xe2ng Cao",d={id:"database/learn-sql-in-30-days/SQL query optimization",title:"28. SQL query optimization",description:"H\u01b0\u1edbng d\u1eabn t\u1ed1i \u01b0u h\xf3a truy v\u1ea5n SQL, ph\xe2n t\xedch truy v\u1ea5n v\u1edbi EXPLAIN ANALYZE, tr\xe1nh l\u1ed7i ph\u1ed5 bi\u1ebfn khi vi\u1ebft SQL, t\u1eadn d\u1ee5ng Index, Partition, Caching \u0111\u1ec3 t\u0103ng hi\u1ec7u su\u1ea5t.",source:"@site/docs/06-database/learn-sql-in-30-days/28. SQL query optimization.md",sourceDirName:"06-database/learn-sql-in-30-days",slug:"/database/learn-sql-in-30-days/28-sql-query-optimization",permalink:"/docs/database/learn-sql-in-30-days/28-sql-query-optimization",draft:!1,unlisted:!1,editUrl:"https://github.com/TienNHM/tiennhm.github.io/tree/master/docs/06-database/learn-sql-in-30-days/28. SQL query optimization.md",tags:[{inline:!0,label:"database",permalink:"/docs/tags/database"},{inline:!0,label:"sql",permalink:"/docs/tags/sql"},{inline:!0,label:"learn-sql",permalink:"/docs/tags/learn-sql"},{inline:!0,label:"roadmap",permalink:"/docs/tags/roadmap"},{inline:!0,label:"dbms",permalink:"/docs/tags/dbms"}],version:"current",lastUpdatedAt:1742146041e3,sidebarPosition:28,frontMatter:{title:"28. SQL query optimization",slug:"28-sql-query-optimization",description:"H\u01b0\u1edbng d\u1eabn t\u1ed1i \u01b0u h\xf3a truy v\u1ea5n SQL, ph\xe2n t\xedch truy v\u1ea5n v\u1edbi EXPLAIN ANALYZE, tr\xe1nh l\u1ed7i ph\u1ed5 bi\u1ebfn khi vi\u1ebft SQL, t\u1eadn d\u1ee5ng Index, Partition, Caching \u0111\u1ec3 t\u0103ng hi\u1ec7u su\u1ea5t.",image:"https://tiennhm.github.io/img/docs/database.jpg",sidebar_position:28,tags:["database","sql","learn-sql","roadmap","dbms"],keywords:["database","sql","learn-sql","roadmap","dbms"],enableComments:!0,draft:!1},sidebar:"tutorialSidebar",previous:{title:"27. Database design best practices",permalink:"/docs/database/learn-sql-in-30-days/27-database-design-best-practices"},next:{title:"29. Recursive Queries & Window Functions",permalink:"/docs/database/learn-sql-in-30-days/29-recursive-queries-window-functions"}},l={},c=[{value:"<strong>1\ufe0f\u20e3 Gi\u1edbi Thi\u1ec7u</strong>",id:"1\ufe0f\u20e3-gi\u1edbi-thi\u1ec7u",level:2},{value:"<strong>2\ufe0f\u20e3 Ph\xe2n T\xedch Truy V\u1ea5n SQL V\u1edbi <code>EXPLAIN ANALYZE</code></strong>",id:"2\ufe0f\u20e3-ph\xe2n-t\xedch-truy-v\u1ea5n-sql-v\u1edbi-explain-analyze",level:2},{value:"\u2705 <strong>2.1. <code>EXPLAIN ANALYZE</code> L\xe0 G\xec?</strong>",id:"-21-explain-analyze-l\xe0-g\xec",level:3},{value:"<strong>3\ufe0f\u20e3 Tr\xe1nh C\xe1c L\u1ed7i Th\u01b0\u1eddng G\u1eb7p Khi Vi\u1ebft Truy V\u1ea5n SQL</strong>",id:"3\ufe0f\u20e3-tr\xe1nh-c\xe1c-l\u1ed7i-th\u01b0\u1eddng-g\u1eb7p-khi-vi\u1ebft-truy-v\u1ea5n-sql",level:2},{value:"\u2705 <strong>3.1. Tr\xe1nh <code>SELECT *</code> Khi Kh\xf4ng C\u1ea7n Thi\u1ebft</strong>",id:"-31-tr\xe1nh-select--khi-kh\xf4ng-c\u1ea7n-thi\u1ebft",level:3},{value:"\u2705 <strong>3.2. D\xf9ng <code>JOIN</code> Hi\u1ec7u Qu\u1ea3</strong>",id:"-32-d\xf9ng-join-hi\u1ec7u-qu\u1ea3",level:3},{value:"\u2705 <strong>3.3. H\u1ea1n Ch\u1ebf D\xf9ng <code>ORDER BY</code> Kh\xf4ng C\u1ea7n Thi\u1ebft</strong>",id:"-33-h\u1ea1n-ch\u1ebf-d\xf9ng-order-by-kh\xf4ng-c\u1ea7n-thi\u1ebft",level:3},{value:"<strong>4\ufe0f\u20e3 T\u1ed1i \u01afu Hi\u1ec7u Su\u1ea5t V\u1edbi <code>INDEX</code>, <code>PARTITION</code>, <code>CACHING</code></strong>",id:"4\ufe0f\u20e3-t\u1ed1i-\u01b0u-hi\u1ec7u-su\u1ea5t-v\u1edbi-index-partition-caching",level:2},{value:"\u2705 <strong>4.1. Index \u2013 T\u0103ng T\u1ed1c T\xecm Ki\u1ebfm</strong>",id:"-41-index--t\u0103ng-t\u1ed1c-t\xecm-ki\u1ebfm",level:3},{value:"\u2705 <strong>4.2. Partition \u2013 X\u1eed L\xfd D\u1eef Li\u1ec7u L\u1edbn</strong>",id:"-42-partition--x\u1eed-l\xfd-d\u1eef-li\u1ec7u-l\u1edbn",level:3},{value:"\u2705 <strong>4.3. Caching \u2013 L\u01b0u K\u1ebft Qu\u1ea3 \u0110\u1ec3 Tr\xe1nh Ch\u1ea1y L\u1ea1i</strong>",id:"-43-caching--l\u01b0u-k\u1ebft-qu\u1ea3-\u0111\u1ec3-tr\xe1nh-ch\u1ea1y-l\u1ea1i",level:3},{value:"<strong>5\ufe0f\u20e3 B\xe0i T\u1eadp Th\u1ef1c H\xe0nh &amp; G\u1ee3i \xdd \u0110\xe1p \xc1n</strong>",id:"5\ufe0f\u20e3-b\xe0i-t\u1eadp-th\u1ef1c-h\xe0nh--g\u1ee3i-\xfd-\u0111\xe1p-\xe1n",level:2},{value:"\ud83d\udd39 <strong>B\xe0i 1: Ph\xe2n t\xedch hi\u1ec7u su\u1ea5t truy v\u1ea5n</strong>",id:"-b\xe0i-1-ph\xe2n-t\xedch-hi\u1ec7u-su\u1ea5t-truy-v\u1ea5n",level:3},{value:"\ud83d\udd39 <strong>B\xe0i 2: Vi\u1ebft truy v\u1ea5n t\u1ed1i \u01b0u h\xf3a</strong>",id:"-b\xe0i-2-vi\u1ebft-truy-v\u1ea5n-t\u1ed1i-\u01b0u-h\xf3a",level:3},{value:"\ud83d\udccc <strong>T\xf3m t\u1eaft b\xe0i h\u1ecdc</strong>",id:"-t\xf3m-t\u1eaft-b\xe0i-h\u1ecdc",level:4}];function a(n){const s={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(s.h1,{id:"-ng\xe0y-28-t\u1ed1i-\u01b0u-h\xf3a-truy-v\u1ea5n--debug-sql-n\xe2ng-cao",children:["\ud83d\udccc ",(0,e.jsx)(s.strong,{children:"Ng\xe0y 28: T\u1ed1i \u01afu H\xf3a Truy V\u1ea5n & Debug SQL N\xe2ng Cao"})]}),"\n",(0,e.jsx)(s.h2,{id:"1\ufe0f\u20e3-gi\u1edbi-thi\u1ec7u",children:(0,e.jsx)(s.strong,{children:"1\ufe0f\u20e3 Gi\u1edbi Thi\u1ec7u"})}),"\n",(0,e.jsxs)(s.p,{children:["Vi\u1ebft truy v\u1ea5n SQL hi\u1ec7u qu\u1ea3 kh\xf4ng ch\u1ec9 gi\xfap t\u0103ng t\u1ed1c \u0111\u1ed9 x\u1eed l\xfd d\u1eef li\u1ec7u m\xe0 c\xf2n gi\u1ea3m t\u1ea3i h\u1ec7 th\u1ed1ng. \u0110\u1ec3 t\u1ed1i \u01b0u h\xf3a truy v\u1ea5n, ch\xfang ta c\u1ea7n:",(0,e.jsx)(s.br,{}),"\n","\u2705 ",(0,e.jsxs)(s.strong,{children:["Ph\xe2n t\xedch truy v\u1ea5n b\u1eb1ng ",(0,e.jsx)(s.code,{children:"EXPLAIN ANALYZE"})]})," \u0111\u1ec3 hi\u1ec3u SQL Engine x\u1eed l\xfd d\u1eef li\u1ec7u nh\u01b0 th\u1ebf n\xe0o.",(0,e.jsx)(s.br,{}),"\n","\u2705 ",(0,e.jsx)(s.strong,{children:"Tr\xe1nh c\xe1c l\u1ed7i ph\u1ed5 bi\u1ebfn khi vi\u1ebft SQL"})," (d\xf9ng sai ",(0,e.jsx)(s.code,{children:"JOIN"}),", l\u1ea1m d\u1ee5ng ",(0,e.jsx)(s.code,{children:"ORDER BY"}),").",(0,e.jsx)(s.br,{}),"\n","\u2705 ",(0,e.jsx)(s.strong,{children:"T\u1eadn d\u1ee5ng Index, Partition, Caching"})," \u0111\u1ec3 t\u0103ng hi\u1ec7u su\u1ea5t."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"M\u1ee5c ti\xeau:"})," H\u1ecdc c\xe1ch ",(0,e.jsx)(s.strong,{children:"debug SQL"}),", hi\u1ec3u ",(0,e.jsx)(s.strong,{children:"c\xe1ch t\u1ed1i \u01b0u h\xf3a t\u1eebng c\xe2u l\u1ec7nh"})," v\xe0 so s\xe1nh c\xe1c chi\u1ebfn l\u01b0\u1ee3c vi\u1ebft SQL t\u1ed1i \u01b0u."]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsx)(s.h2,{id:"2\ufe0f\u20e3-ph\xe2n-t\xedch-truy-v\u1ea5n-sql-v\u1edbi-explain-analyze",children:(0,e.jsxs)(s.strong,{children:["2\ufe0f\u20e3 Ph\xe2n T\xedch Truy V\u1ea5n SQL V\u1edbi ",(0,e.jsx)(s.code,{children:"EXPLAIN ANALYZE"})]})}),"\n",(0,e.jsxs)(s.h3,{id:"-21-explain-analyze-l\xe0-g\xec",children:["\u2705 ",(0,e.jsxs)(s.strong,{children:["2.1. ",(0,e.jsx)(s.code,{children:"EXPLAIN ANALYZE"})," L\xe0 G\xec?"]})]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.code,{children:"EXPLAIN"})," gi\xfap ki\u1ec3m tra ",(0,e.jsx)(s.strong,{children:"k\u1ebf ho\u1ea1ch th\u1ef1c thi truy v\u1ea5n (Query Execution Plan)"}),".",(0,e.jsx)(s.br,{}),"\n","\ud83d\udd39 ",(0,e.jsx)(s.code,{children:"EXPLAIN ANALYZE"})," ch\u1ea1y truy v\u1ea5n ",(0,e.jsx)(s.strong,{children:"th\u1eadt"})," v\xe0 hi\u1ec3n th\u1ecb th\u1eddi gian th\u1ef1c thi."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"V\xed d\u1ee5:"})]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"EXPLAIN ANALYZE SELECT * FROM Orders WHERE OrderDate > '2024-01-01';\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd0e ",(0,e.jsx)(s.strong,{children:"K\u1ebft qu\u1ea3 m\u1eabu:"})]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{children:"Seq Scan on Orders  (cost=0.00..431.00 rows=1000 width=48) (actual time=0.045..2.343 rows=120 loops=1)\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.strong,{children:"Gi\u1ea3i th\xedch:"})]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.code,{children:"Seq Scan on Orders"})," \u2192 SQL ",(0,e.jsx)(s.strong,{children:"qu\xe9t to\xe0n b\u1ed9 b\u1ea3ng"})," (ch\u1eadm n\u1ebfu b\u1ea3ng l\u1edbn)."]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.code,{children:"cost=0.00..431.00"})," \u2192 Chi ph\xed x\u1eed l\xfd (c\xe0ng nh\u1ecf c\xe0ng t\u1ed1t)."]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.code,{children:"actual time=0.045..2.343"})," \u2192 Th\u1eddi gian th\u1ef1c t\u1ebf (ms)."]}),"\n"]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"C\xe1ch t\u1ed1i \u01b0u:"})," D\xf9ng Index \u0111\u1ec3 tr\xe1nh qu\xe9t to\xe0n b\u1ed9 b\u1ea3ng"]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"CREATE INDEX idx_orders_orderdate ON Orders(OrderDate);\n"})}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsx)(s.h2,{id:"3\ufe0f\u20e3-tr\xe1nh-c\xe1c-l\u1ed7i-th\u01b0\u1eddng-g\u1eb7p-khi-vi\u1ebft-truy-v\u1ea5n-sql",children:(0,e.jsx)(s.strong,{children:"3\ufe0f\u20e3 Tr\xe1nh C\xe1c L\u1ed7i Th\u01b0\u1eddng G\u1eb7p Khi Vi\u1ebft Truy V\u1ea5n SQL"})}),"\n",(0,e.jsxs)(s.h3,{id:"-31-tr\xe1nh-select--khi-kh\xf4ng-c\u1ea7n-thi\u1ebft",children:["\u2705 ",(0,e.jsxs)(s.strong,{children:["3.1. Tr\xe1nh ",(0,e.jsx)(s.code,{children:"SELECT *"})," Khi Kh\xf4ng C\u1ea7n Thi\u1ebft"]})]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.code,{children:"SELECT *"})," ",(0,e.jsx)(s.strong,{children:"g\xe2y l\xe3ng ph\xed t\xe0i nguy\xean"}),", nh\u1ea5t l\xe0 khi b\u1ea3ng c\xf3 nhi\u1ec1u c\u1ed9t."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"V\xed d\u1ee5 sai:"})]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM Orders WHERE OrderDate > '2024-01-01';\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"C\xe1ch \u0111\xfang:"})," Ch\u1ec9 l\u1ea5y c\u1ed9t c\u1ea7n thi\u1ebft"]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"SELECT OrderID, CustomerID FROM Orders WHERE OrderDate > '2024-01-01';\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.strong,{children:"L\u1ee3i \xedch:"})," Gi\u1ea3m l\u01b0\u1ee3ng d\u1eef li\u1ec7u truy\u1ec1n t\u1ea3i, t\u0103ng t\u1ed1c truy v\u1ea5n."]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"-32-d\xf9ng-join-hi\u1ec7u-qu\u1ea3",children:["\u2705 ",(0,e.jsxs)(s.strong,{children:["3.2. D\xf9ng ",(0,e.jsx)(s.code,{children:"JOIN"})," Hi\u1ec7u Qu\u1ea3"]})]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.code,{children:"JOIN"})," sai c\xe1ch c\xf3 th\u1ec3 g\xe2y ",(0,e.jsx)(s.strong,{children:"Cartesian Join (Nh\xe2n \u0111\u1ec1)"}),", khi\u1ebfn SQL ch\u1ea1y c\u1ef1c ch\u1eadm."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"V\xed d\u1ee5 sai:"})]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"SELECT Customers.Name, Orders.TotalAmount \nFROM Customers, Orders \nWHERE Customers.CustomerID = Orders.CustomerID; -- \u274c L\u1ed7i: D\xf9ng d\u1ea5u ph\u1ea9y thay v\xec JOIN\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"C\xe1ch \u0111\xfang:"})]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"SELECT Customers.Name, Orders.TotalAmount \nFROM Customers \nINNER JOIN Orders ON Customers.CustomerID = Orders.CustomerID; -- \u2705 T\u1ed1i \u01b0u h\u01a1n\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.strong,{children:"L\u1ee3i \xedch:"})]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Tr\xe1nh nh\xe2n \u0111\u1ec1"})," (Cartesian Product)."]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"D\u1ec5 b\u1ea3o tr\xec & d\u1ec5 \u0111\u1ecdc h\u01a1n"}),"."]}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"-33-h\u1ea1n-ch\u1ebf-d\xf9ng-order-by-kh\xf4ng-c\u1ea7n-thi\u1ebft",children:["\u2705 ",(0,e.jsxs)(s.strong,{children:["3.3. H\u1ea1n Ch\u1ebf D\xf9ng ",(0,e.jsx)(s.code,{children:"ORDER BY"})," Kh\xf4ng C\u1ea7n Thi\u1ebft"]})]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.code,{children:"ORDER BY"})," l\xe0m SQL ",(0,e.jsx)(s.strong,{children:"t\u1ed1n CPU"}),", nh\u1ea5t l\xe0 tr\xean b\u1ea3ng l\u1edbn."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"V\xed d\u1ee5 sai:"})]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"SELECT * FROM Orders ORDER BY OrderDate;\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"C\xe1ch \u0111\xfang:"})," Ch\u1ec9 d\xf9ng khi th\u1ef1c s\u1ef1 c\u1ea7n thi\u1ebft"]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"SELECT OrderID, CustomerID FROM Orders WHERE OrderDate > '2024-01-01' ORDER BY OrderDate DESC;\n"})}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsx)(s.h2,{id:"4\ufe0f\u20e3-t\u1ed1i-\u01b0u-hi\u1ec7u-su\u1ea5t-v\u1edbi-index-partition-caching",children:(0,e.jsxs)(s.strong,{children:["4\ufe0f\u20e3 T\u1ed1i \u01afu Hi\u1ec7u Su\u1ea5t V\u1edbi ",(0,e.jsx)(s.code,{children:"INDEX"}),", ",(0,e.jsx)(s.code,{children:"PARTITION"}),", ",(0,e.jsx)(s.code,{children:"CACHING"})]})}),"\n",(0,e.jsxs)(s.h3,{id:"-41-index--t\u0103ng-t\u1ed1c-t\xecm-ki\u1ebfm",children:["\u2705 ",(0,e.jsx)(s.strong,{children:"4.1. Index \u2013 T\u0103ng T\u1ed1c T\xecm Ki\u1ebfm"})]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 Index gi\xfap truy v\u1ea5n nhanh h\u01a1n, \u0111\u1eb7c bi\u1ec7t v\u1edbi ",(0,e.jsx)(s.code,{children:"WHERE"}),", ",(0,e.jsx)(s.code,{children:"JOIN"}),"."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"V\xed d\u1ee5:"})]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"CREATE INDEX idx_orders_orderdate ON Orders(OrderDate);\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.strong,{children:"L\u1ee3i \xedch:"})]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:["Gi\u1ea3m th\u1eddi gian t\xecm ki\u1ebfm t\u1eeb ",(0,e.jsx)(s.strong,{children:"O(n) \u2192 O(log n)"}),"."]}),"\n",(0,e.jsxs)(s.li,{children:["T\u0103ng t\u1ed1c truy v\u1ea5n v\u1edbi ",(0,e.jsx)(s.code,{children:"WHERE OrderDate > ..."}),"."]}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"-42-partition--x\u1eed-l\xfd-d\u1eef-li\u1ec7u-l\u1edbn",children:["\u2705 ",(0,e.jsx)(s.strong,{children:"4.2. Partition \u2013 X\u1eed L\xfd D\u1eef Li\u1ec7u L\u1edbn"})]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 N\u1ebfu b\u1ea3ng c\xf3 h\xe0ng ",(0,e.jsx)(s.strong,{children:"tri\u1ec7u d\xf2ng"}),", ",(0,e.jsx)(s.strong,{children:"Partitioning"})," gi\xfap SQL ch\u1ec9 \u0111\u1ecdc d\u1eef li\u1ec7u c\u1ea7n thi\u1ebft."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"V\xed d\u1ee5:"})," Chia b\u1ea3ng ",(0,e.jsx)(s.code,{children:"Orders"})," theo n\u0103m"]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"CREATE TABLE Orders_2024 PARTITION OF Orders FOR VALUES FROM ('2024-01-01') TO ('2024-12-31');\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.strong,{children:"L\u1ee3i \xedch:"})]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"Gi\u1ea3m s\u1ed1 d\xf2ng ph\u1ea3i qu\xe9t."}),"\n",(0,e.jsx)(s.li,{children:"Nhanh h\u01a1n so v\u1edbi qu\xe9t to\xe0n b\u1ed9 b\u1ea3ng."}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"-43-caching--l\u01b0u-k\u1ebft-qu\u1ea3-\u0111\u1ec3-tr\xe1nh-ch\u1ea1y-l\u1ea1i",children:["\u2705 ",(0,e.jsx)(s.strong,{children:"4.3. Caching \u2013 L\u01b0u K\u1ebft Qu\u1ea3 \u0110\u1ec3 Tr\xe1nh Ch\u1ea1y L\u1ea1i"})]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 N\u1ebfu truy v\u1ea5n ch\u1ea1y nhi\u1ec1u l\u1ea7n v\u1edbi d\u1eef li\u1ec7u \xedt thay \u0111\u1ed5i, ",(0,e.jsx)(s.strong,{children:"d\xf9ng Materialized View ho\u1eb7c Redis Cache"}),"."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"V\xed d\u1ee5:"})]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"CREATE MATERIALIZED VIEW OrderSummary AS \nSELECT CustomerID, SUM(TotalAmount) AS TotalSpent \nFROM Orders GROUP BY CustomerID;\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udd39 ",(0,e.jsx)(s.strong,{children:"L\u1ee3i \xedch:"})]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Gi\u1ea3m t\u1ea3i"})," cho h\u1ec7 th\u1ed1ng."]}),"\n",(0,e.jsxs)(s.li,{children:[(0,e.jsx)(s.strong,{children:"Truy v\u1ea5n nhanh h\u01a1n"})," so v\u1edbi t\xednh to\xe1n l\u1ea1i m\u1ed7i l\u1ea7n."]}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsx)(s.h2,{id:"5\ufe0f\u20e3-b\xe0i-t\u1eadp-th\u1ef1c-h\xe0nh--g\u1ee3i-\xfd-\u0111\xe1p-\xe1n",children:(0,e.jsx)(s.strong,{children:"5\ufe0f\u20e3 B\xe0i T\u1eadp Th\u1ef1c H\xe0nh & G\u1ee3i \xdd \u0110\xe1p \xc1n"})}),"\n",(0,e.jsxs)(s.h3,{id:"-b\xe0i-1-ph\xe2n-t\xedch-hi\u1ec7u-su\u1ea5t-truy-v\u1ea5n",children:["\ud83d\udd39 ",(0,e.jsx)(s.strong,{children:"B\xe0i 1: Ph\xe2n t\xedch hi\u1ec7u su\u1ea5t truy v\u1ea5n"})]}),"\n",(0,e.jsxs)(s.p,{children:["Cho b\u1ea3ng ",(0,e.jsx)(s.code,{children:"Orders"})," c\xf3 h\u01a1n ",(0,e.jsx)(s.strong,{children:"1 tri\u1ec7u d\xf2ng"}),", ch\u1ea1y l\u1ec7nh sau:"]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"EXPLAIN ANALYZE SELECT * FROM Orders WHERE OrderDate > '2024-01-01';\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udccc ",(0,e.jsx)(s.strong,{children:"C\xe2u h\u1ecfi:"}),(0,e.jsx)(s.br,{}),"\n","1\ufe0f\u20e3 Truy v\u1ea5n n\xe0y c\xf3 qu\xe9t to\xe0n b\u1ed9 b\u1ea3ng kh\xf4ng?",(0,e.jsx)(s.br,{}),"\n","2\ufe0f\u20e3 L\xe0m sao \u0111\u1ec3 t\u1ed1i \u01b0u n\xf3?"]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udcdd ",(0,e.jsx)(s.strong,{children:"G\u1ee3i \xfd \u0111\xe1p \xe1n:"})]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:["N\u1ebfu th\u1ea5y ",(0,e.jsx)(s.code,{children:"Seq Scan"}),", ngh\u0129a l\xe0 \u0111ang qu\xe9t to\xe0n b\u1ed9 b\u1ea3ng \u2192 ",(0,e.jsx)(s.strong,{children:"C\u1ea7n t\u1ea1o Index"})]}),"\n"]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"CREATE INDEX idx_orders_orderdate ON Orders(OrderDate);\n"})}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h3,{id:"-b\xe0i-2-vi\u1ebft-truy-v\u1ea5n-t\u1ed1i-\u01b0u-h\xf3a",children:["\ud83d\udd39 ",(0,e.jsx)(s.strong,{children:"B\xe0i 2: Vi\u1ebft truy v\u1ea5n t\u1ed1i \u01b0u h\xf3a"})]}),"\n",(0,e.jsxs)(s.p,{children:["B\u1ea3ng ",(0,e.jsx)(s.code,{children:"Products"})," c\xf3 h\u01a1n ",(0,e.jsx)(s.strong,{children:"5 tri\u1ec7u d\xf2ng"}),", c\u1ea7n t\xecm s\u1ea3n ph\u1ea9m b\xe1n ch\u1ea1y nh\u1ea5t theo danh m\u1ee5c."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udca1 ",(0,e.jsx)(s.strong,{children:"Vi\u1ebft truy v\u1ea5n t\u1ed1i \u01b0u:"})]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"SELECT CategoryID, ProductID, SUM(Quantity) AS TotalSold\nFROM OrderDetails\nGROUP BY CategoryID, ProductID\nORDER BY TotalSold DESC\nLIMIT 10;\n"})}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udccc ",(0,e.jsx)(s.strong,{children:"C\xe2u h\u1ecfi:"}),(0,e.jsx)(s.br,{}),"\n","1\ufe0f\u20e3 C\u1ea7n Index g\xec \u0111\u1ec3 t\u1ed1i \u01b0u?",(0,e.jsx)(s.br,{}),"\n","2\ufe0f\u20e3 N\u1ebfu b\u1ea3ng qu\xe1 l\u1edbn, d\xf9ng Partition nh\u01b0 th\u1ebf n\xe0o?"]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udcdd ",(0,e.jsx)(s.strong,{children:"G\u1ee3i \xfd \u0111\xe1p \xe1n:"})]}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsx)(s.li,{children:"D\xf9ng Index:"}),"\n"]}),"\n",(0,e.jsx)(s.pre,{children:(0,e.jsx)(s.code,{className:"language-sql",children:"CREATE INDEX idx_orderdetails_category_product ON OrderDetails(CategoryID, ProductID);\n"})}),"\n",(0,e.jsxs)(s.ul,{children:["\n",(0,e.jsxs)(s.li,{children:["N\u1ebfu d\u1eef li\u1ec7u l\u1edbn \u2192 ",(0,e.jsx)(s.strong,{children:"D\xf9ng Partition theo CategoryID"}),"."]}),"\n"]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.h4,{id:"-t\xf3m-t\u1eaft-b\xe0i-h\u1ecdc",children:["\ud83d\udccc ",(0,e.jsx)(s.strong,{children:"T\xf3m t\u1eaft b\xe0i h\u1ecdc"})]}),"\n",(0,e.jsxs)(s.p,{children:["\u2705 ",(0,e.jsxs)(s.strong,{children:["D\xf9ng ",(0,e.jsx)(s.code,{children:"EXPLAIN ANALYZE"})," \u0111\u1ec3 ki\u1ec3m tra hi\u1ec7u su\u1ea5t truy v\u1ea5n."]}),(0,e.jsx)(s.br,{}),"\n","\u2705 ",(0,e.jsxs)(s.strong,{children:["Tr\xe1nh l\u1ed7i th\u01b0\u1eddng g\u1eb7p: ",(0,e.jsx)(s.code,{children:"SELECT *"}),", ",(0,e.jsx)(s.code,{children:"ORDER BY"})," kh\xf4ng c\u1ea7n thi\u1ebft, sai ",(0,e.jsx)(s.code,{children:"JOIN"})]}),".",(0,e.jsx)(s.br,{}),"\n","\u2705 ",(0,e.jsx)(s.strong,{children:"T\u1eadn d\u1ee5ng Index, Partition, Caching \u0111\u1ec3 t\u1ed1i \u01b0u h\xf3a."})]}),"\n",(0,e.jsx)(s.hr,{}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\ude80 ",(0,e.jsx)(s.strong,{children:"Ti\u1ebfp theo:"})," ",(0,e.jsx)(s.a,{href:"/docs/database/learn-sql-in-30-days/29-recursive-queries-window-functions",children:"Recursive Queries & Window Functions"}),"."]}),"\n",(0,e.jsxs)(s.p,{children:["\ud83d\udccc ",(0,e.jsx)(s.strong,{children:"L\u1ed9 tr\xecnh:"})," ",(0,e.jsx)(s.a,{href:"/docs/database/learn-sql-in-30-days/30-day-sql-learning-roadmap",children:"H\u1ecdc SQL trong 30 ng\xe0y"}),"."]})]})}function o(n={}){const{wrapper:s}={...(0,r.R)(),...n.components};return s?(0,e.jsx)(s,{...n,children:(0,e.jsx)(a,{...n})}):a(n)}},28453:(n,s,i)=>{i.d(s,{R:()=>h,x:()=>d});var e=i(96540);const r={},t=e.createContext(r);function h(n){const s=e.useContext(t);return e.useMemo((function(){return"function"==typeof n?n(s):{...s,...n}}),[s,n])}function d(n){let s;return s=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:h(n.components),e.createElement(t.Provider,{value:s},n.children)}}}]);