"use strict";(globalThis.webpackChunktiennhm_github_io=globalThis.webpackChunktiennhm_github_io||[]).push([[32305],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>t});var r=s(96540);const i={},c=r.createContext(i);function l(e){const n=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),r.createElement(c.Provider,{value:n},e.children)}},93243:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>o,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"agent-skills/react-performance-best-practices","title":"Ph\u1ea7n 11 - React Performance Best Practices","description":"Checklist t\u1ed1i \u01b0u hi\u1ec7u n\u0103ng React/Next.js \u2013 async waterfall, bundle size, caching, rerender, rendering, JS perf \u2013 tr\xedch t\u1eeb react-performance.csv cho Agent Skills.","source":"@site/docs/08-agent-skills/11-react-performance-best-practices.md","sourceDirName":"08-agent-skills","slug":"/agent-skills/agent-skills-11-react-performance","permalink":"/docs/agent-skills/agent-skills-11-react-performance","draft":false,"unlisted":false,"editUrl":"https://github.com/TienNHM/tiennhm.github.io/tree/master/docs/08-agent-skills/11-react-performance-best-practices.md","tags":[{"inline":true,"label":"agent-skills","permalink":"/docs/tags/agent-skills"},{"inline":true,"label":"react","permalink":"/docs/tags/react"},{"inline":true,"label":"performance","permalink":"/docs/tags/performance"},{"inline":true,"label":"nextjs","permalink":"/docs/tags/nextjs"}],"version":"current","lastUpdatedAt":1770648073000,"sidebarPosition":11,"frontMatter":{"title":"Ph\u1ea7n 11 - React Performance Best Practices","slug":"agent-skills-11-react-performance","description":"Checklist t\u1ed1i \u01b0u hi\u1ec7u n\u0103ng React/Next.js \u2013 async waterfall, bundle size, caching, rerender, rendering, JS perf \u2013 tr\xedch t\u1eeb react-performance.csv cho Agent Skills.","image":"https://react.dev/images/og-home.png","sidebar_position":11,"tags":["agent-skills","react","performance","nextjs"],"keywords":["react performance","nextjs performance","async waterfall","bundle size","caching","rerender"],"enableComments":true,"draft":false},"sidebar":"tutorialSidebar","previous":{"title":"Ph\u1ea7n 10 - Typography & Font Pairings","permalink":"/docs/agent-skills/agent-skills-10-typography"},"next":{"title":"Ph\u1ea7n 12 - Landing Page Patterns","permalink":"/docs/agent-skills/agent-skills-12-landing-patterns"}}');var i=s(74848),c=s(28453);const l={title:"Ph\u1ea7n 11 - React Performance Best Practices",slug:"agent-skills-11-react-performance",description:"Checklist t\u1ed1i \u01b0u hi\u1ec7u n\u0103ng React/Next.js \u2013 async waterfall, bundle size, caching, rerender, rendering, JS perf \u2013 tr\xedch t\u1eeb react-performance.csv cho Agent Skills.",image:"https://react.dev/images/og-home.png",sidebar_position:11,tags:["agent-skills","react","performance","nextjs"],keywords:["react performance","nextjs performance","async waterfall","bundle size","caching","rerender"],enableComments:!0,draft:!1},t="Agent Skills - Ph\u1ea7n 11: React Performance Best Practices",a={},d=[{value:"1. Async Waterfall &amp; Data Fetching",id:"1-async-waterfall--data-fetching",level:2},{value:"1.1 \ud83d\udd34 Tr\xe1nh await blocking tr\xean m\u1ecdi branch (Async Waterfall)",id:"11--tr\xe1nh-await-blocking-tr\xean-m\u1ecdi-branch-async-waterfall",level:3},{value:"1.2 \ud83d\udd34 Promise.all cho async \u0111\u1ed9c l\u1eadp",id:"12--promiseall-cho-async-\u0111\u1ed9c-l\u1eadp",level:3},{value:"1.3 \ud83d\udd34 T\u1ed1i \u01b0u API Route \u2013 start promises early, await late",id:"13--t\u1ed1i-\u01b0u-api-route--start-promises-early-await-late",level:3},{value:"1.4 \ud83d\udd34 D\xf9ng Suspense \u0111\u1ec3 tr\xe1nh ch\u1eb7n c\u1ea3 page",id:"14--d\xf9ng-suspense-\u0111\u1ec3-tr\xe1nh-ch\u1eb7n-c\u1ea3-page",level:3},{value:"1.5 \ud83d\udfe1 Parallel fetch b\u1eb1ng composition trong RSC",id:"15--parallel-fetch-b\u1eb1ng-composition-trong-rsc",level:3},{value:"2. Bundle Size &amp; Code Splitting",id:"2-bundle-size--code-splitting",level:2},{value:"2.1 \ud83d\udd34 Tr\xe1nh barrel import cho lib l\u1edbn",id:"21--tr\xe1nh-barrel-import-cho-lib-l\u1edbn",level:3},{value:"2.2 \ud83d\udd34 Dynamic import cho component n\u1eb7ng",id:"22--dynamic-import-cho-component-n\u1eb7ng",level:3},{value:"2.3 \ud83d\udfe1 Defer third-party (analytics, logging)",id:"23--defer-third-party-analytics-logging",level:3},{value:"2.4 \ud83d\udd34 Conditional loading cho feature hi\u1ebfm d\xf9ng",id:"24--conditional-loading-cho-feature-hi\u1ebfm-d\xf9ng",level:3},{value:"3. Server-side Caching &amp; RSC Boundaries",id:"3-server-side-caching--rsc-boundaries",level:2},{value:"3.1 \ud83d\udfe1 <code>React.cache</code> \u0111\u1ec3 dedupe fetch trong 1 request",id:"31--reactcache-\u0111\u1ec3-dedupe-fetch-trong-1-request",level:3},{value:"3.2 \ud83d\udfe1 LRU cache cho cross-request",id:"32--lru-cache-cho-cross-request",level:3},{value:"3.3 \ud83d\udd34 Gi\u1ea3m serialization gi\u1eefa Server &amp; Client Component",id:"33--gi\u1ea3m-serialization-gi\u1eefa-server--client-component",level:3},{value:"3.4 \ud83d\udfe1 D\xf9ng <code>after()</code> cho work kh\xf4ng block response (Next.js)",id:"34--d\xf9ng-after-cho-work-kh\xf4ng-block-response-nextjs",level:3},{value:"4. Client Caching &amp; Shared Event Listeners",id:"4-client-caching--shared-event-listeners",level:2},{value:"4.1 \ud83d\udfe1 D\xf9ng SWR cho fetch client-side",id:"41--d\xf9ng-swr-cho-fetch-client-side",level:3},{value:"4.2 \ud83d\udfe2 Share global event listeners",id:"42--share-global-event-listeners",level:3},{value:"5. Rerender T\u1ed1i \u01afu (State &amp; Effects)",id:"5-rerender-t\u1ed1i-\u01b0u-state--effects",level:2},{value:"5.1 \ud83d\udfe1 \u0110\u1ecdc state ch\u1ec9 trong callback khi c\u1ea7n",id:"51--\u0111\u1ecdc-state-ch\u1ec9-trong-callback-khi-c\u1ea7n",level:3},{value:"5.2 \ud83d\udfe1 D\xf9ng <code>memo()</code> cho ph\u1ea7n expensive",id:"52--d\xf9ng-memo-cho-ph\u1ea7n-expensive",level:3},{value:"5.3 \ud83d\udfe2 Narrow dependency cho <code>useEffect</code>",id:"53--narrow-dependency-cho-useeffect",level:3},{value:"5.4 \ud83d\udfe1 D\xf9ng state derived boolean thay v\xec state continuous",id:"54--d\xf9ng-state-derived-boolean-thay-v\xec-state-continuous",level:3},{value:"5.5 \ud83d\udfe1 Functional <code>setState</code>",id:"55--functional-setstate",level:3},{value:"5.6 \ud83d\udfe1 Lazy init cho <code>useState</code>",id:"56--lazy-init-cho-usestate",level:3},{value:"5.7 \ud83d\udfe1 D\xf9ng <code>startTransition</code> cho update kh\xf4ng kh\u1ea9n c\u1ea5p",id:"57--d\xf9ng-starttransition-cho-update-kh\xf4ng-kh\u1ea9n-c\u1ea5p",level:3},{value:"6. Rendering &amp; Hydration",id:"6-rendering--hydration",level:2},{value:"6.1 \ud83d\udfe2 Animate wrapper thay v\xec SVG tr\u1ef1c ti\u1ebfp",id:"61--animate-wrapper-thay-v\xec-svg-tr\u1ef1c-ti\u1ebfp",level:3},{value:"6.2 \ud83d\udd34 D\xf9ng <code>content-visibility: auto</code> cho list d\xe0i",id:"62--d\xf9ng-content-visibility-auto-cho-list-d\xe0i",level:3},{value:"6.3 \ud83d\udfe2 Hoist static JSX ra ngo\xe0i component",id:"63--hoist-static-jsx-ra-ngo\xe0i-component",level:3},{value:"6.4 \ud83d\udfe1 Tr\xe1nh flicker khi hydration (theme, layout)",id:"64--tr\xe1nh-flicker-khi-hydration-theme-layout",level:3},{value:"6.5 \ud83d\udfe2 D\xf9ng ternary thay v\xec <code>&amp;&amp;</code> cho s\u1ed1 <code>0</code>",id:"65--d\xf9ng-ternary-thay-v\xec--cho-s\u1ed1-0",level:3},{value:"6.6 \ud83d\udfe1 Preserve state khi show/hide component \u0111\u1eaft",id:"66--preserve-state-khi-showhide-component-\u0111\u1eaft",level:3},{value:"7. JS Performance &amp; Advanced Patterns",id:"7-js-performance--advanced-patterns",level:2},{value:"7.1 \ud83d\udfe1 Batch thay \u0111\u1ed5i CSS/DOM",id:"71--batch-thay-\u0111\u1ed5i-cssdom",level:3},{value:"7.2 \ud83d\udfe1 D\xf9ng Map/Set &amp; cache cho lookup l\u1eb7p l\u1ea1i",id:"72--d\xf9ng-mapset--cache-cho-lookup-l\u1eb7p-l\u1ea1i",level:3},{value:"7.3 \ud83d\udfe1 Hoist RegExp &amp; memoize k\u1ebft qu\u1ea3",id:"73--hoist-regexp--memoize-k\u1ebft-qu\u1ea3",level:3},{value:"7.4 \ud83d\udfe1 D\xf9ng <code>toSorted()</code> thay v\xec <code>sort()</code> mutate",id:"74--d\xf9ng-tosorted-thay-v\xec-sort-mutate",level:3},{value:"7.5 \ud83d\udfe2 Early return, length check, combine loop",id:"75--early-return-length-check-combine-loop",level:3},{value:"7.6 \ud83d\udfe2 Event handler refs &amp; <code>useLatest</code>",id:"76--event-handler-refs--uselatest",level:3},{value:"T\xf3m t\u1eaft",id:"t\xf3m-t\u1eaft",level:2}];function h(e){const n={a:"a",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"agent-skills---ph\u1ea7n-11-react-performance-best-practices",children:"Agent Skills - Ph\u1ea7n 11: React Performance Best Practices"})}),"\n",(0,i.jsxs)(n.p,{children:["T\xe0i li\u1ec7u n\xe0y t\xf3m t\u1eaft ",(0,i.jsx)(n.strong,{children:"React/Next.js performance best practices"})," d\xf9ng l\xe0m checklist cho Agent khi refactor ho\u1eb7c review code.",(0,i.jsx)(n.br,{}),"\n","Ngu\u1ed3n: ",(0,i.jsx)(n.a,{href:"https://raw.githubusercontent.com/nextlevelbuilder/ui-ux-pro-max-skill/refs/heads/main/src/ui-ux-pro-max/data/react-performance.csv",children:(0,i.jsx)(n.code,{children:"react-performance.csv"})})," t\u1eeb ",(0,i.jsx)(n.a,{href:"https://github.com/nextlevelbuilder/ui-ux-pro-max-skill",children:"ui-ux-pro-max-skill"}),"."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Nh\xf3m ch\xednh:"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Async Waterfall & Data fetching"}),"\n",(0,i.jsx)(n.li,{children:"Bundle Size & Code splitting"}),"\n",(0,i.jsx)(n.li,{children:"Server-side caching & RSC boundaries"}),"\n",(0,i.jsx)(n.li,{children:"Client caching (SWR) & event listeners"}),"\n",(0,i.jsx)(n.li,{children:"Rerender t\u1ed1i \u01b0u (state/effect)"}),"\n",(0,i.jsx)(n.li,{children:"Rendering & hydration"}),"\n",(0,i.jsx)(n.li,{children:"JS performance & advanced patterns"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Trong m\u1ed7i m\u1ee5c:",(0,i.jsx)(n.br,{}),"\n",(0,i.jsx)(n.strong,{children:"N\xean"})," c\xf3 v\xed d\u1ee5 ",(0,i.jsx)(n.code,{children:"+"})," \xb7 ",(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean"})," c\xf3 v\xed d\u1ee5 ",(0,i.jsx)(n.code,{children:"-"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"1-async-waterfall--data-fetching",children:"1. Async Waterfall & Data Fetching"}),"\n",(0,i.jsx)(n.h3,{id:"11--tr\xe1nh-await-blocking-tr\xean-m\u1ecdi-branch-async-waterfall",children:"1.1 \ud83d\udd34 Tr\xe1nh await blocking tr\xean m\u1ecdi branch (Async Waterfall)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Ch\u1ec9 ",(0,i.jsx)(n.code,{children:"await"})," trong branch th\u1ef1c s\u1ef1 c\u1ea7n."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ if (skip) return { skipped: true };\n+ const data = await fetch();\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Await \u1edf \u0111\u1ea7u function r\u1ed3i m\u1edbi ki\u1ec3m tra branch."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- const data = await fetch();\n- if (skip) return { skipped: true };\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"12--promiseall-cho-async-\u0111\u1ed9c-l\u1eadp",children:"1.2 \ud83d\udd34 Promise.all cho async \u0111\u1ed9c l\u1eadp"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Ch\u1ea1y song song khi kh\xf4ng ph\u1ee5 thu\u1ed9c nhau."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const [user, posts] = await Promise.all([\n+   fetchUser(),\n+   fetchPosts(),\n+ ]);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Await tu\u1ea7n t\u1ef1 cho c\xe1c request \u0111\u1ed9c l\u1eadp."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- const user = await fetchUser();\n- const posts = await fetchPosts();\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"13--t\u1ed1i-\u01b0u-api-route--start-promises-early-await-late",children:"1.3 \ud83d\udd34 T\u1ed1i \u01b0u API Route \u2013 start promises early, await late"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Kh\u1edfi t\u1ea1o promise s\u1edbm, ",(0,i.jsx)(n.code,{children:"await"})," khi th\u1eadt c\u1ea7n tr\u1ea3 v\u1ec1."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const sessionP = auth();\n+ const configP = fetchConfig();\n+ const session = await sessionP;\n+ const config = await configP;\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," ",(0,i.jsx)(n.code,{children:"await"})," tu\u1ea7n t\u1ef1 trong handler API."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- const session = await auth();\n- const config = await fetchConfig();\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"14--d\xf9ng-suspense-\u0111\u1ec3-tr\xe1nh-ch\u1eb7n-c\u1ea3-page",children:"1.4 \ud83d\udd34 D\xf9ng Suspense \u0111\u1ec3 tr\xe1nh ch\u1eb7n c\u1ea3 page"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Wrap ph\u1ea7n async trong ",(0,i.jsx)(n.code,{children:"Suspense"})," v\u1edbi skeleton."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ <Suspense fallback={<Skeleton />}>\n+   <DataDisplay />\n+ </Suspense>\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," \u0110\u1ee3i fetch xong h\u1ebft r\u1ed3i m\u1edbi render page."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- const data = await fetchData();\n- return <DataDisplay data={data} />;\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"15--parallel-fetch-b\u1eb1ng-composition-trong-rsc",children:"1.5 \ud83d\udfe1 Parallel fetch b\u1eb1ng composition trong RSC"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," \u0110\u1ec3 ",(0,i.jsx)(n.code,{children:"Header"})," / ",(0,i.jsx)(n.code,{children:"Sidebar"})," t\u1ef1 fetch \u2192 ch\u1ea1y song song trong tree."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ export default function Page() {\n+   return (\n+     <>\n+       <Header />\n+       <Sidebar />\n+       <Content />\n+     </>\n+   );\n+ }\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Fetch t\u1eebng ph\u1ea7n tu\u1ea7n t\u1ef1 trong component cha."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"2-bundle-size--code-splitting",children:"2. Bundle Size & Code Splitting"}),"\n",(0,i.jsx)(n.h3,{id:"21--tr\xe1nh-barrel-import-cho-lib-l\u1edbn",children:"2.1 \ud83d\udd34 Tr\xe1nh barrel import cho lib l\u1edbn"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Import tr\u1ef1c ti\u1ebfp icon/component c\u1ea7n d\xf9ng."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ import Check from 'lucide-react/dist/esm/icons/check';\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Import t\u1eeb barrel ",(0,i.jsx)(n.code,{children:"index"})," k\xe9o theo nhi\u1ec1u module kh\xf4ng d\xf9ng."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- import { Check } from 'lucide-react';\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"22--dynamic-import-cho-component-n\u1eb7ng",children:"2.2 \ud83d\udd34 Dynamic import cho component n\u1eb7ng"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Lazy-load editor/chart/... b\u1eb1ng ",(0,i.jsx)(n.code,{children:"next/dynamic"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const Monaco = dynamic(() => import('./MonacoEditor'), { ssr: false });\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Import th\u1eb3ng editor \u1edf top \u2013 v\xe0o main bundle."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- import MonacoEditor from './MonacoEditor';\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"23--defer-third-party-analytics-logging",children:"2.3 \ud83d\udfe1 Defer third-party (analytics, logging)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Dynamic import sau hydration / khi c\u1ea7n."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const Analytics = dynamic(() => import('@vercel/analytics/react'), {\n+   ssr: false,\n+ });\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Nh\xe9t analytics v\xe0o bundle ch\xednh."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- import { Analytics } from '@vercel/analytics/react';\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"24--conditional-loading-cho-feature-hi\u1ebfm-d\xf9ng",children:"2.4 \ud83d\udd34 Conditional loading cho feature hi\u1ebfm d\xf9ng"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Ch\u1ec9 load module n\u1eb7ng khi b\u1eadt feature."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ useEffect(() => {\n+   if (enabled) {\n+     import('./heavy');\n+   }\n+ }, [enabled]);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Import module n\u1eb7ng m\u1ecdi l\xfac."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- import './heavy';\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"3-server-side-caching--rsc-boundaries",children:"3. Server-side Caching & RSC Boundaries"}),"\n",(0,i.jsxs)(n.h3,{id:"31--reactcache-\u0111\u1ec3-dedupe-fetch-trong-1-request",children:["3.1 \ud83d\udfe1 ",(0,i.jsx)(n.code,{children:"React.cache"})," \u0111\u1ec3 dedupe fetch trong 1 request"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Wrap fetcher b\u1eb1ng ",(0,i.jsx)(n.code,{children:"cache()"})," \u0111\u1ec3 tr\xe1nh g\u1ecdi l\u1eb7p l\u1ea1i trong tree."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ export const getUser = cache(async () => {\n+   return db.user.find();\n+ });\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"32--lru-cache-cho-cross-request",children:"3.2 \ud83d\udfe1 LRU cache cho cross-request"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Cache d\u1eef li\u1ec7u \xedt \u0111\u1ed5i (config, feature flags...) b\u1eb1ng LRU."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const cache = new LRUCache({ max: 1000, ttl: 5 * 60 * 1000 });\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"33--gi\u1ea3m-serialization-gi\u1eefa-server--client-component",children:"3.3 \ud83d\udd34 Gi\u1ea3m serialization gi\u1eefa Server & Client Component"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Truy\u1ec1n \u0111\xfang field client c\u1ea7n, kh\xf4ng pass c\u1ea3 object to."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ <Profile name={user.name} avatarUrl={user.avatarUrl} />\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Pass full ",(0,i.jsx)(n.code,{children:"user"})," 50 field qua boundary."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- <Profile user={user} />\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"34--d\xf9ng-after-cho-work-kh\xf4ng-block-response-nextjs",children:["3.4 \ud83d\udfe1 D\xf9ng ",(0,i.jsx)(n.code,{children:"after()"})," cho work kh\xf4ng block response (Next.js)"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Logging/analytics ch\u1ea1y sau khi tr\u1ea3 response."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ after(async () => {\n+   await logAction();\n+ });\n+ return Response.json(data);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," \u0110\u1ee3i log xong m\u1edbi tr\u1ea3 response."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- await logAction();\n- return Response.json(data);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"4-client-caching--shared-event-listeners",children:"4. Client Caching & Shared Event Listeners"}),"\n",(0,i.jsx)(n.h3,{id:"41--d\xf9ng-swr-cho-fetch-client-side",children:"4.1 \ud83d\udfe1 D\xf9ng SWR cho fetch client-side"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," ",(0,i.jsx)(n.code,{children:"useSWR"})," \u0111\u1ec3 t\u1ef1 dedupe + cache + revalidate."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const { data } = useSWR('/api/users', fetcher);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," T\u1ef1 fetch trong ",(0,i.jsx)(n.code,{children:"useEffect"})," m\u1ed7i l\u1ea7n mount."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- useEffect(() => {\n-   fetch('/api/users').then(setUsers);\n- }, []);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"42--share-global-event-listeners",children:"4.2 \ud83d\udfe2 Share global event listeners"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," D\xf9ng ",(0,i.jsx)(n.code,{children:"useSWRSubscription"})," ho\u1eb7c abstraction \u0111\u1ec3 share listener global."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ useSWRSubscription('global-keydown', subscribeKeydown);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," \u0110\u0103ng k\xfd ",(0,i.jsx)(n.code,{children:"window.addEventListener"})," trong m\u1ed7i instance."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"5-rerender-t\u1ed1i-\u01b0u-state--effects",children:"5. Rerender T\u1ed1i \u01afu (State & Effects)"}),"\n",(0,i.jsx)(n.h3,{id:"51--\u0111\u1ecdc-state-ch\u1ec9-trong-callback-khi-c\u1ea7n",children:"5.1 \ud83d\udfe1 \u0110\u1ecdc state ch\u1ec9 trong callback khi c\u1ea7n"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," \u0110\u1ecdc ",(0,i.jsx)(n.code,{children:"location"}),"/",(0,i.jsx)(n.code,{children:"search"})," tr\u1ef1c ti\u1ebfp trong handler n\u1ebfu kh\xf4ng c\u1ea7n subscribe."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const handleClick = () => {\n+   const params = new URLSearchParams(location.search);\n+   // ...\n+ };\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Subscribe v\xe0o state n\u1eb7ng ch\u1ec9 \u0111\u1ec3 d\xf9ng trong handler."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- const params = useSearchParams();\n- const handleClick = () => {\n-   params.get('ref');\n- };\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"52--d\xf9ng-memo-cho-ph\u1ea7n-expensive",children:["5.2 \ud83d\udfe1 D\xf9ng ",(0,i.jsx)(n.code,{children:"memo()"})," cho ph\u1ea7n expensive"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," T\xe1ch sub-component v\xe0 memo."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const UserAvatar = memo(function UserAvatar({ user }) {\n+   // expensive\n+   return <Avatar ... />;\n+ });\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," T\xednh to\xe1n n\u1eb7ng trong component ch\xednh r\u1ed3i early return."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"53--narrow-dependency-cho-useeffect",children:["5.3 \ud83d\udfe2 Narrow dependency cho ",(0,i.jsx)(n.code,{children:"useEffect"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Dependency l\xe0 primitive (id) thay v\xec c\u1ea3 object."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ useEffect(() => {\n+   console.log(user.id);\n+ }, [user.id]);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," D\xf9ng object reference l\xe0m dependency."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- useEffect(() => {\n-   console.log(user.id);\n- }, [user]);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"54--d\xf9ng-state-derived-boolean-thay-v\xec-state-continuous",children:"5.4 \ud83d\udfe1 D\xf9ng state derived boolean thay v\xec state continuous"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Subscribes v\xe0o ",(0,i.jsx)(n.code,{children:"isMobile"})," boolean."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const isMobile = useMediaQuery('(max-width: 767px)');\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Truy\u1ec1n c\u1ea3 width l\xean m\u1ecdi component."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- const width = useWindowWidth();\n- const isMobile = width < 768;\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"55--functional-setstate",children:["5.5 \ud83d\udfe1 Functional ",(0,i.jsx)(n.code,{children:"setState"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," D\xf9ng d\u1ea1ng callback \u0111\u1ec3 tr\xe1nh stale closure & dependency d\u01b0 th\u1eeba."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ setItems(curr => [...curr, newItem]);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," D\u1ef1a v\xe0o bi\u1ebfn ",(0,i.jsx)(n.code,{children:"items"})," b\xean ngo\xe0i."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- setItems([...items, newItem]);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"56--lazy-init-cho-usestate",children:["5.6 \ud83d\udfe1 Lazy init cho ",(0,i.jsx)(n.code,{children:"useState"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Truy\u1ec1n function n\u1ebfu init t\u1ed1n k\xe9m."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const [index] = useState(() => buildSearchIndex(items));\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," G\u1ecdi tr\u1ef1c ti\u1ebfp \u2013 ch\u1ea1y l\u1ea1i m\u1ed7i render."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- const [index] = useState(buildSearchIndex(items));\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"57--d\xf9ng-starttransition-cho-update-kh\xf4ng-kh\u1ea9n-c\u1ea5p",children:["5.7 \ud83d\udfe1 D\xf9ng ",(0,i.jsx)(n.code,{children:"startTransition"})," cho update kh\xf4ng kh\u1ea9n c\u1ea5p"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Mark update heavy nh\u01b0 scroll, filter UI l\xe0 transition."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ startTransition(() => {\n+   setScrollY(window.scrollY);\n+ });\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," G\xe2y block UI tr\xean m\u1ecdi state change."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- setScrollY(window.scrollY);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"6-rendering--hydration",children:"6. Rendering & Hydration"}),"\n",(0,i.jsx)(n.h3,{id:"61--animate-wrapper-thay-v\xec-svg-tr\u1ef1c-ti\u1ebfp",children:"6.1 \ud83d\udfe2 Animate wrapper thay v\xec SVG tr\u1ef1c ti\u1ebfp"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," B\u1ecdc SVG trong ",(0,i.jsx)(n.code,{children:"div"})," v\xe0 animate wrapper cho GPU-friendly."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'+ <div className="animate-spin">\n+   <svg>...</svg>\n+ </div>\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Add animation tr\u1ef1c ti\u1ebfp l\xean SVG."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'- <svg className="animate-spin">...</svg>\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"62--d\xf9ng-content-visibility-auto-cho-list-d\xe0i",children:["6.2 \ud83d\udd34 D\xf9ng ",(0,i.jsx)(n.code,{children:"content-visibility: auto"})," cho list d\xe0i"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Cho item off-screen \u0111\u1ec3 browser defer render."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ .item {\n+   content-visibility: auto;\n+   contain-intrinsic-size: 0 80px;\n+ }\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Render 1000 item full DOM kh\xf4ng t\u1ed1i \u01b0u."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"63--hoist-static-jsx-ra-ngo\xe0i-component",children:"6.3 \ud83d\udfe2 Hoist static JSX ra ngo\xe0i component"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Khai b\xe1o skeleton/static element \u1edf module scope."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'+ const skeleton = <div className="animate-pulse" />;\n+ function C() {\n+   return skeleton;\n+ }\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," T\u1ea1o l\u1ea1i JSX y chang m\u1ed7i render."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:'- function C() {\n-   return <div className="animate-pulse" />;\n- }\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"64--tr\xe1nh-flicker-khi-hydration-theme-layout",children:"6.4 \ud83d\udfe1 Tr\xe1nh flicker khi hydration (theme, layout)"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," D\xf9ng inline script sync tr\u01b0\u1edbc hydration (v\xed d\u1ee5 theme)."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ <script\n+   dangerouslySetInnerHTML={{\n+     __html: \"document.documentElement.dataset.theme = localStorage.theme || 'light'\",\n+   }}\n+ />\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," \u0110\u1ee3i ",(0,i.jsx)(n.code,{children:"useEffect"})," m\u1edbi set theme \u2192 flash."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- useEffect(() => {\n-   setTheme(localStorage.theme);\n- }, []);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"65--d\xf9ng-ternary-thay-v\xec--cho-s\u1ed1-0",children:["6.5 \ud83d\udfe2 D\xf9ng ternary thay v\xec ",(0,i.jsx)(n.code,{children:"&&"})," cho s\u1ed1 ",(0,i.jsx)(n.code,{children:"0"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Explicit null khi count = 0."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ {count > 0 ? <Badge>{count}</Badge> : null}\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," ",(0,i.jsx)(n.code,{children:"count &&"})," v\xec ",(0,i.jsx)(n.code,{children:"0"})," l\xe0 falsy nh\u01b0ng c\xf3 th\u1ec3 render ",(0,i.jsx)(n.code,{children:"'0'"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- {count && <Badge>{count}</Badge>}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"66--preserve-state-khi-showhide-component-\u0111\u1eaft",children:"6.6 \ud83d\udfe1 Preserve state khi show/hide component \u0111\u1eaft"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," D\xf9ng wrapper (Activity-like) \u0111\u1ec3 gi\u1eef DOM/state."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ <Activity mode={isOpen ? 'visible' : 'hidden'}>\n+   <Menu />\n+ </Activity>\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Unmount/remount g\xe2y m\u1ea5t state m\u1ed7i l\u1ea7n toggle."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- {isOpen && <Menu />}\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"7-js-performance--advanced-patterns",children:"7. JS Performance & Advanced Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"71--batch-thay-\u0111\u1ed5i-cssdom",children:"7.1 \ud83d\udfe1 Batch thay \u0111\u1ed5i CSS/DOM"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Toggle class ho\u1eb7c set nhi\u1ec1u style m\u1ed9t l\u1ea7n."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ element.classList.add('highlighted');\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," Set t\u1eebng property m\u1ed9t g\xe2y nhi\u1ec1u reflow."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- el.style.width = '100px';\n- el.style.height = '200px';\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"72--d\xf9ng-mapset--cache-cho-lookup-l\u1eb7p-l\u1ea1i",children:"7.2 \ud83d\udfe1 D\xf9ng Map/Set & cache cho lookup l\u1eb7p l\u1ea1i"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Index tr\u01b0\u1edbc r\u1ed3i lookup O(1)."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const byId = new Map(users.map(u => [u.id, u]));\n+ byId.get(id);\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," ",(0,i.jsx)(n.code,{children:".find()"})," trong loop ho\u1eb7c ",(0,i.jsx)(n.code,{children:".includes()"})," l\u1eb7p l\u1ea1i."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- users.find(u => u.id === id);\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"73--hoist-regexp--memoize-k\u1ebft-qu\u1ea3",children:"7.3 \ud83d\udfe1 Hoist RegExp & memoize k\u1ebft qu\u1ea3"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Khai b\xe1o ",(0,i.jsx)(n.code,{children:"RegExp"})," & cache ngo\xe0i render."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const EMAIL_RE = /^[^@]+@[^@]+$/;\n+ function validate(x) {\n+   return EMAIL_RE.test(x);\n+ }\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," T\u1ea1o RegExp/slugify trong m\u1ecdi render/hot path."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"74--d\xf9ng-tosorted-thay-v\xec-sort-mutate",children:["7.4 \ud83d\udfe1 D\xf9ng ",(0,i.jsx)(n.code,{children:"toSorted()"})," thay v\xec ",(0,i.jsx)(n.code,{children:"sort()"})," mutate"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Gi\u1eef immutability khi sort."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"+ const sorted = users.toSorted((a, b) =>\n+   a.name.localeCompare(b.name),\n+ );\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Kh\xf4ng n\xean:"})," D\xf9ng ",(0,i.jsx)(n.code,{children:"array.sort()"})," l\xe0m mutate state."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-diff",children:"- users.sort((a, b) => a.name.localeCompare(b.name));\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"75--early-return-length-check-combine-loop",children:"7.5 \ud83d\udfe2 Early return, length check, combine loop"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," Tho\xe1t s\u1edbm khi c\xf3 th\u1ec3, check ",(0,i.jsx)(n.code,{children:".length"})," tr\u01b0\u1edbc, combine nhi\u1ec1u ",(0,i.jsx)(n.code,{children:"filter()"}),"/",(0,i.jsx)(n.code,{children:"map()"})," th\xe0nh 1 v\xf2ng l\u1eb7p."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h3,{id:"76--event-handler-refs--uselatest",children:["7.6 \ud83d\udfe2 Event handler refs & ",(0,i.jsx)(n.code,{children:"useLatest"})]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"N\xean:"})," L\u01b0u callback trong ref / ",(0,i.jsx)(n.code,{children:"useEffectEvent"})," \u0111\u1ec3 effect subscription stable."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Gi\u1ea3m:"})," Re-subscribe event ho\u1eb7c ch\u1ea1y l\u1ea1i effect n\u1eb7ng ch\u1ec9 v\xec callback \u0111\u1ed5i reference."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"t\xf3m-t\u1eaft",children:"T\xf3m t\u1eaft"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Nh\xf3m"}),(0,i.jsx)(n.th,{children:"\xdd ch\xednh"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Async Waterfall"}),(0,i.jsxs)(n.td,{children:["D\xf9ng ",(0,i.jsx)(n.code,{children:"Promise.all"}),", start early/await late, Suspense"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Bundle Size"}),(0,i.jsx)(n.td,{children:"Dynamic import, tr\xe1nh barrel, load conditional/intent-based"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Server & RSC"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"cache()"}),", LRU, gi\u1ea3m serialization qua boundary"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Client Caching"}),(0,i.jsx)(n.td,{children:"SWR cho fetch, share event listeners"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Rerender"}),(0,i.jsx)(n.td,{children:"Functional setState, narrow deps, memoized component"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Rendering"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"content-visibility"}),", hoist JSX, tr\xe1nh flicker hydration"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"JS Perf & Advanced"}),(0,i.jsx)(n.td,{children:"Set/Map, cache, toSorted, early return, stable handler refs"})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["Ngu\u1ed3n d\u1eef li\u1ec7u: ",(0,i.jsx)(n.a,{href:"https://raw.githubusercontent.com/nextlevelbuilder/ui-ux-pro-max-skill/refs/heads/main/src/ui-ux-pro-max/data/react-performance.csv",children:(0,i.jsx)(n.code,{children:"react-performance.csv"})})," \u2014 ",(0,i.jsx)(n.a,{href:"https://github.com/nextlevelbuilder/ui-ux-pro-max-skill",children:"ui-ux-pro-max-skill"}),"."]})]})}function o(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);